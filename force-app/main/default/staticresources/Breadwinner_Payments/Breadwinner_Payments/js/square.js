(()=>{"use strict";var e={844:(e,t,n)=>{n.d(t,{Rf:()=>o,DM:()=>a,en:()=>s,jH:()=>c,Cf:()=>l,Db:()=>u,EG:()=>d,l4:()=>p,JY:()=>h});var r=n(422),i={};function o(){return(0,r.KV)()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}function a(){var e=o(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function c(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function l(e){var t=o();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var i=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),i}function u(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function d(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}function p(){try{return document.location.href}catch(e){return""}}function h(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}},422:(e,t,n)=>{function r(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function i(e,t){return e.require(t)}n.d(t,{KV:()=>r,l$:()=>i}),e=n.hmd(e)},170:(e,t,n)=>{n.d(t,{yW:()=>c,ph:()=>l});var r=n(844),i=n(422);e=n.hmd(e);var o={nowSeconds:function(){return Date.now()/1e3}},a=(0,i.KV)()?function(){try{return(0,i.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=(0,r.Rf)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),s=void 0===a?o:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},c=o.nowSeconds.bind(o),l=s.nowSeconds.bind(s);!function(){var e=(0,r.Rf)().performance;if(e&&e.now){var t=36e5,n=e.now(),i=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,a=o<t,s=e.timing&&e.timing.navigationStart,c="number"==typeof s?Math.abs(s+n-i):t;(a||c<t)&&(o<=c&&e.timeOrigin)}}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FunctionToString:()=>T,InboundFilters:()=>xe});var t={};n.r(t),n.d(t,{Breadcrumbs:()=>bt,Dedupe:()=>Dt,GlobalHandlers:()=>Ot,LinkedErrors:()=>Rt,TryCatch:()=>Tt,UserAgent:()=>Lt});var r=new Set(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"]),i=/android/i;function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function a(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s,c,l,u,d,p,h,f,v,g={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var n=new URL(e),r={};return t.forEach((e=>{var t=n.searchParams.get(e);t&&(r[e]=t)})),r},isAndroid:function(){return i.test(window.navigator.userAgent)},isDesktopSafari:a,isIOS:function(){return r.has(window.navigator.platform)||window.navigator.userAgent.includes("Mac")&&"ontouchend"in document},isMobileSafari:o,isSafari:function(){return o()||a()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};function m(e){return t=e,n=v.JAVASCRIPT,r=new Blob([t],{type:n}),URL.createObjectURL(r);var t,n,r}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(s||(s={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(c||(c={})),function(e){e.FULL="FULL",e.MIN="MIN"}(l||(l={})),function(e){e.CARD="CARD"}(u||(u={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(d||(d={})),function(e){e.SUCCESS="SUCCESS"}(p||(p={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(h||(h={})),function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(f||(f={})),function(e){e.JAVASCRIPT="text/javascript",e.HTML="text/html"}(v||(v={}));var y=null!=="production"?"production":"development",E="".length>0?"-".concat(""):"",_={get ALIPAY_PAY_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/alipay/pay")},get ANALYTICS_PUBLIC_ENDPOINT(){switch(y){case f.test:return m("window.Square.Analytics = {};");default:return"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js")}},get API_HOST(){switch(y){case f.production:return"pci-connect.squareup.com";case f.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(y){case f.production:return"squareup.com";case f.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get APPENDED_FILE_NAME(){return E},get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT(){return"".concat(this.API_URL,"/v2/apple-pay/validate-merchant")},get ASSET_BASE_URL(){return function(e){switch(e){case f.production:return"https://web.squarecdn.com";case f.sandbox:return"https://sandbox.web.squarecdn.com";case f.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(f[y])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){switch(y){case f.production:return"https://api.cash.app";default:return"https://api.cashstaging.app"}},get CASH_APP_API_CUSTOMER(){return"".concat(this.CASH_APP_API,"/customer")},get CASH_APP_AUTH_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/cash-app/auth")},get CASH_APP_STYLES(){return"".concat(this.ASSET_URL,"/cash.css")},get CREATE_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/link-session")},get ENABLE_ERROR_LOGGING(){return y!==f.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat(E,".html")},get GOOGLE_PAY_ENV(){switch(y){case f.production:return h.PRODUCTION;default:return h.TEST}},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get GOOGLE_PAY_MERCHANT_ID(){return"05498866192997955200"},get GOOGLE_PAY_SCRIPT_URL(){switch(y){case f.test:return m("window.google = {};");default:return"https://pay.google.com/gp/p/js/pay.js"}},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe").concat(E,".html")},get MASTERPASS_CALLBACK_ENDPOINT(){return"".concat(this.API_URL,"/v2/masterpass/callback")},get MASTERPASS_LIBRARY_URL(){return"".concat(this.API_URL,"/v2/masterpass/frame")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PAYMENTS_UI_STYLES(){switch(y){case f.test:return m("");default:return"".concat(this.ASSET_URL,"/payments-ui.css")}},get PLAID_LINK_ENV(){switch(y){case f.production:return"production";default:return"sandbox"}},get PLAID_LINK_SCRIPT_URL(){switch(y){case f.test:return m("window.Plaid = {};");default:return"https://cdn.plaid.com/link/v2/stable/link-initialize.js"}},get SENTRY_DSN(){switch(y){case f.test:case f.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"".concat(this.API_PROTOCOL).concat(this.SENTRY_PUBLIC_KEY,"@").concat(this.API_HOST,"/payments/error/").concat(this.SENTRY_PROJECT_ID)}},get SENTRY_PROJECT_ID(){return"3478832"},get SENTRY_PUBLIC_KEY(){return"565ee38bb5ff45dabc25ab6d7b8bebe3"},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat(E,".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},get VERSION(){return"1.15.0"},get WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/wallet-nonce")},env:y},S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function C(e,t){function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var I,A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function w(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function P(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O(arguments[t]));return e}var T=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){I=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return I.apply(n,e)}},e.id="FunctionToString",e}(),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function R(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function N(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(R(arguments[t]));return e}var L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function D(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(D(arguments[t]));return e}function k(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return z(e,Error)}}function M(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function U(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function H(e){return"[object String]"===Object.prototype.toString.call(e)}function F(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function G(e){return"[object Object]"===Object.prototype.toString.call(e)}function V(e){return"undefined"!=typeof Event&&z(e,Event)}function B(e){return"undefined"!=typeof Element&&z(e,Element)}function j(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function z(e,t){try{return e instanceof t}catch(e){return!1}}var q,Y=n(170);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(q||(q={}));var K,W,Z=function(){function e(e){var t=this;this._state=q.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(q.RESOLVED,e)},this._reject=function(e){t._setResult(q.REJECTED,e)},this._setResult=function(e,n){t._state===q.PENDING&&(j(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==q.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===q.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===q.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var i=t.length,o=[];t.forEach((function(t,a){e.resolve(t).then((function(e){o[a]=e,0==(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,i){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void i(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void i(e)}else i(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),Q=n(844),J=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=x(t._breadcrumbs),n._tags=L({},t._tags),n._extra=L({},t._extra),n._contexts=L({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=x(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=L(L({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=L(L({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=L(L({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=L(L({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=L(L({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,i=this.getSpan();return(null===(e=i)||void 0===e?void 0:e.transaction)?null===(t=i)||void 0===t?void 0:t.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=L(L({},this._tags),t._tags),this._extra=L(L({},this._extra),t._extra),this._contexts=L(L({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):G(t)&&(t=t,this._tags=L(L({},this._tags),t.tags),this._extra=L(L({},this._extra),t.extra),this._contexts=L(L({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r=L({timestamp:(0,Y.yW)()},e);return this._breadcrumbs=x(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=L(L({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=L(L({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=L(L({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=L(L({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=L({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=L({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=x(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(x(X(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return void 0===r&&(r=0),new Z((function(o,a){var s=e[r];if(null===t||"function"!=typeof s)o(t);else{var c=s(L({},t),n);j(c)?c.then((function(t){return i._notifyEventProcessors(e,t,n,r+1).then(o)})).then(null,a):i._notifyEventProcessors(e,c,n,r+1).then(o).then(null,a)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function X(){var e=(0,Q.Rf)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function $(e){X().push(e)}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(K||(K={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(W||(W={}));var ee=(0,Q.Rf)(),te="Sentry Logger ",ne=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Q.Cf)((function(){ee.console.log(te+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Q.Cf)((function(){ee.console.warn(te+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Q.Cf)((function(){ee.console.error(te+"[Error]: "+e.join(" "))}))},e}();ee.__SENTRY__=ee.__SENTRY__||{};var re=ee.__SENTRY__.logger||(ee.__SENTRY__.logger=new ne),ie=n(422),oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function se(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(e,t){try{for(var n=e,r=[],i=0,o=0,a=" > ".length,s=void 0;n&&i++<5&&!("html"===(s=le(n,t))||i>1&&o+r.length*a+s.length>=80);)r.push(s),o+=s.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function le(e,t){var n,r,i,o,a,s,c,l=e,u=[];if(!l||!l.tagName)return"";u.push(l.tagName.toLowerCase());var d=(null===(n=t)||void 0===n?void 0:n.length)?t.filter((function(e){return l.getAttribute(e)})).map((function(e){return[e,l.getAttribute(e)]})):null;if(null===(r=d)||void 0===r?void 0:r.length)d.forEach((function(e){u.push("["+e[0]+'="'+e[1]+'"]')}));else if(l.id&&u.push("#"+l.id),(i=l.className)&&H(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)u.push("."+o[c]);var p=["type","name","title","alt"];for(c=0;c<p.length;c++)a=p[c],(s=l.getAttribute(a))&&u.push("["+a+'="'+s+'"]');return u.join("")}var ue=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}(),de="<anonymous>";function pe(e){try{return e&&"function"==typeof e&&e.name||de}catch(e){return de}}function he(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function fe(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function ve(e,t){return!!H(e)&&(n=t,"[object RegExp]"===Object.prototype.toString.call(n)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var n}function ge(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=i}}function me(e){if(k(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(V(e)){var i=e,o={};o.type=i.type;try{o.target=B(i.target)?ce(i.target):Object.prototype.toString.call(i.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=B(i.currentTarget)?ce(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var a in"undefined"!=typeof CustomEvent&&z(e,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o}return e}function ye(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r,i=Se(e,t);return r=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?ye(e,t-1,n):i}function Ee(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==n.g&&e===n.g?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":G(r=e)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+pe(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e;var r}function _e(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new ue),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=Ee(e);return F(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var i=Ee(t,e);if(F(i))return i;var o=me(t),a=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=_e(s,o[s],n-1,r));return r.unmemoize(t),a}function Se(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return _e(e,n,t)})))}catch(e){return"**non-serializable**"}}function Ce(e,t){void 0===t&&(t=40);var n=Object.keys(me(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return he(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:he(i,t)}return""}function Ie(e){var t,n;if(G(e)){var r=e,i={};try{for(var o=se(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=Ie(r[s]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(Ie):e}var Ae=function(){function e(e){this.errors=0,this.sid=(0,Q.DM)(),this.duration=0,this.status=K.Ok,this.init=!0,this.ignoreDuration=!1;var t=(0,Y.ph)();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||(0,Y.ph)(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,Q.DM)()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===K.Ok?this.update({status:K.Exited}):this.update()},e.prototype.toJSON=function(){return Ie({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Ie({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),we=function(){function e(e,t,n){void 0===t&&(t=new J),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=J.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=(0,Q.DM)(),r=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,L(L({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=(0,Q.DM)(),i=n;if(!n){var o=void 0;try{throw new Error(e)}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,L(L({},i),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=(0,Q.DM)();return this._invokeClient("captureEvent",e,L(L({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,c=o.maxBreadcrumbs,l=void 0===c?100:c;if(!(l<=0)){var u=(0,Y.yW)(),d=L({timestamp:u},e),p=s?(0,Q.Cf)((function(){return s(d,t)})):d;null!==p&&r.addBreadcrumb(p,l)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=Pe(this);try{e(this)}finally{Pe(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return re.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,r,i;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(i=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===i||i.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},o=i.release,a=i.environment,s=((0,Q.Rf)().navigator||{}).userAgent,c=new Ae(L(L(L({release:o,environment:a},n&&{user:n.getUser()}),s&&{userAgent:s}),e));if(n){var l=n.getSession&&n.getSession();l&&l.status===K.Ok&&l.update({status:K.Exited}),this.endSession(),n.setSession(c)}return c},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,a=i.client;a&&a[e]&&(t=a)[e].apply(t,x(n,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Oe(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);re.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function Oe(){var e=(0,Q.Rf)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function Pe(e){var t=Oe(),n=Re(t);return Ne(t,e),n}function Te(){var e=Oe();return be(e)&&!Re(e).isOlderThan(4)||Ne(e,new we),(0,ie.KV)()?function(e){var t,n,r;try{var i=null===(r=null===(n=null===(t=Oe().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!i)return Re(e);if(!be(i)||Re(i).isOlderThan(4)){var o=Re(e).getStackTop();Ne(i,new we(o.client,J.clone(o.scope)))}return Re(i)}catch(t){return Re(e)}}(e):Re(e)}function be(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Re(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new we),e.__SENTRY__.hub}function Ne(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}var Le,De=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],xe=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){$((function(t){var n=Te();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),o=i?i.getOptions():{},a="function"==typeof r._mergeOptions?r._mergeOptions(o):{};return"function"!=typeof r._shouldDropEvent?t:r._shouldDropEvent(t,a)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(re.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,Q.jH)(e)),!0):this._isIgnoredError(e,t)?(re.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,Q.jH)(e)),!0):this._isDeniedUrl(e,t)?(re.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,Q.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(re.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,Q.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return ve(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return ve(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return ve(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:N(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:N(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:N(this._options.ignoreErrors||[],e.ignoreErrors||[],De),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return re.error("Cannot extract message for event "+(0,Q.jH)(e)),[]}return[]},e.prototype._getLastValidUrl=function(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;n>=0;n--){var r=e[n];if("<anonymous>"!==(null===(t=r)||void 0===t?void 0:t.filename))return r.filename||null}return null},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){return re.error("Cannot extract url for event "+(0,Q.jH)(e)),null}},e.id="InboundFilters",e}();function ke(){if(!("fetch"in(0,Q.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function Me(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ue(){if(!ke())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(Le||(Le={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(Le||(Le={}));var He,Fe,Ge,Ve=(0,Q.Rf)(),Be={},je={};function ze(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(Be[e.type]=Be[e.type]||[],Be[e.type].push(e.callback),function(e){if(!je[e])switch(je[e]=!0,e){case"console":"console"in Ve&&["debug","info","warn","error","log","assert"].forEach((function(e){e in Ve.console&&ge(Ve.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];qe("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,Ve.console,n)}}))}));break;case"dom":!function(){if("document"in Ve){var e=qe.bind(null,"dom"),t=We(e,!0);Ve.document.addEventListener("click",t,!1),Ve.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=Ve[t]&&Ve[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ge(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var s=We(e);a.handler=s,t.call(this,n,s,i)}a.refCount+=1}catch(e){}return t.call(this,n,r,i)}})),ge(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in Ve){var e=[],t=[],n=XMLHttpRequest.prototype;ge(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,a=r[1];o.__sentry_xhr__={method:H(r[0])?r[0].toUpperCase():r[0],url:r[1]},H(a)&&"POST"===o.__sentry_xhr__.method&&a.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var s=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(e){}try{var n=e.indexOf(o);if(-1!==n){e.splice(n);var i=t.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(e){}qe("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?ge(o,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(),e.apply(o,t)}})):o.addEventListener("readystatechange",s),n.apply(o,r)}})),ge(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.push(this),t.push(r),qe("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}}();break;case"fetch":(function(){if(!ke())return!1;var e=(0,Q.Rf)();if(Me(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=Me(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){re.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t})()&&ge(Ve,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:Ye(t),url:Ke(t)},startTimestamp:Date.now()};return qe("fetch",ae({},r)),e.apply(Ve,t).then((function(e){return qe("fetch",ae(ae({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw qe("fetch",ae(ae({},r),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if(function(){var e=(0,Q.Rf)(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}()){var e=Ve.onpopstate;Ve.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Ve.location.href,i=He;if(He=r,qe("history",{from:i,to:r}),e)try{return e.apply(this,t)}catch(e){}},ge(Ve.history,"pushState",t),ge(Ve.history,"replaceState",t)}function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var i=He,o=String(r);He=o,qe("history",{from:i,to:o})}return e.apply(this,t)}}}();break;case"error":Ze=Ve.onerror,Ve.onerror=function(e,t,n,r,i){return qe("error",{column:r,error:i,line:n,msg:e,url:t}),!!Ze&&Ze.apply(this,arguments)};break;case"unhandledrejection":Qe=Ve.onunhandledrejection,Ve.onunhandledrejection=function(e){return qe("unhandledrejection",e),!Qe||Qe.apply(this,arguments)};break;default:re.warn("unknown instrumentation type:",e)}}(e.type))}function qe(e,t){var n,r;if(e&&Be[e])try{for(var i=se(Be[e]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t)}catch(t){re.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+pe(a)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ye(e){return void 0===e&&(e=[]),"Request"in Ve&&z(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function Ke(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in Ve&&z(e[0],Request)?e[0].url:String(e[0])}function We(e,t){return void 0===t&&(t=!1),function(n){if(n&&Ge!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===Fe||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Ge,n))&&(e({event:n,name:r,global:t}),Ge=n),clearTimeout(Fe),Fe=Ve.setTimeout((function(){Fe=void 0}),1e3)}}}var Ze=null,Qe=null,Je="?",Xe=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$e=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,et=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,tt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nt=/\((\S*)(?::(\d+))(?::(\d+))\)/,rt=/Minified React error #\d+;/i;function it(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:rt.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=e.stacktrace.split("\n"),o=[],a=0;a<i.length;a+=2){var s=null;(t=n.exec(i[a]))?s={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=r.exec(i[a]))&&(s={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),s&&(!s.func&&s.line&&(s.func=Je),o.push(s))}return o.length?{message:at(e),name:e.name,stack:o}:null}(e))return ot(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,r,i=[],o=e.stack.split("\n"),a=0;a<o.length;++a){if(n=Xe.exec(o[a])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=nt.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]);var c=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],l=n[1]||Je,u=-1!==l.indexOf("safari-extension"),d=-1!==l.indexOf("safari-web-extension");(u||d)&&(l=-1!==l.indexOf("@")?l.split("@")[0]:Je,c=u?"safari-extension:"+c:"safari-web-extension:"+c),r={url:c,func:l,args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=et.exec(o[a]))r={url:n[2],func:n[1]||Je,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=$e.exec(o[a])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=tt.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==a||n[5]||void 0===e.columnNumber||(i[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||Je,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=Je),i.push(r)}return i.length?{message:at(e),name:e.name,stack:i}:null}(e))return ot(t,n)}catch(e){}return{message:at(e),name:e&&e.name,stack:[],failed:!0}}function ot(e,t){try{return A(A({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function at(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function st(e){var t=lt(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function ct(e){return{exception:{values:[st(e)]}}}function lt(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function ut(e,t,n){var r,i;if(void 0===n&&(n={}),M(e)&&e.error)return ct(it(e=e.error));if(U(e)||(i=e,"[object DOMException]"===Object.prototype.toString.call(i))){var o=e,a=o.name||(U(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return r=dt(s,t,n),(0,Q.Db)(r,s),"code"in o&&(r.tags=A(A({},r.tags),{"DOMException.code":""+o.code})),r}return k(e)?r=ct(it(e)):G(e)||V(e)?(r=function(e,t,n){var r={exception:{values:[{type:V(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Ce(e)}]},extra:{__serialized__:ye(e)}};if(t){var i=lt(it(t).stack);r.stacktrace={frames:i}}return r}(e,t,n.rejection),(0,Q.EG)(r,{synthetic:!0}),r):(r=dt(e,t,n),(0,Q.Db)(r,""+e,void 0),(0,Q.EG)(r,{synthetic:!0}),r)}function dt(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var i=lt(it(t).stack);r.stacktrace={frames:i}}return r}function pt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ht(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pt(arguments[t]));return e}function ft(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Te();if(r&&r[e])return r[e].apply(r,ht(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function vt(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return ft("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function gt(e){ft("withScope",e)}var mt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}),yt=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,mt(r,n.prototype),r}return function(e,t){function n(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),Et=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,_t=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,i=t.pass,o=t.port,a=t.projectId;return t.protocol+"://"+t.publicKey+(e&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},e.prototype._fromString=function(e){var t=Et.exec(e);if(!t)throw new yt("Invalid Dsn");var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],c=n[4],l=void 0===c?"":c,u="",d=n[5],p=d.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),d=p.pop()),d){var h=d.match(/^\d+/);h&&(d=h[0])}this._fromComponents({host:s,pass:a,path:u,projectId:d,port:l,protocol:r,publicKey:i})},e.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new yt("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new yt("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new yt("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new yt("Invalid Dsn: Invalid port "+this.port)},e}(),St=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new _t(e),this.metadata=t,this._tunnel=n}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+t.toString()),e)if("dsn"!==i)if("user"===i){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e,t={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return e=t,Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}(),Ct=0;function It(){return Ct>0}function At(){Ct+=1,setTimeout((function(){Ct-=1}))}function wt(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(e){return wt(e,t)}));return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw At(),gt((function(n){n.addEventProcessor((function(e){var n=A({},e);return t.mechanism&&((0,Q.Db)(n,void 0,void 0),(0,Q.EG)(n,t.mechanism)),n.extra=A(A({},n.extra),{arguments:r}),n})),vt(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch(e){}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return e.name}})}catch(e){}return r}var Ot=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=A({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(re.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(re.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(ze({callback:function(n){var r=n.error,i=Te(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(o&&!It()&&!a){var s=i.getClient(),c=void 0===r&&H(n.msg)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(ut(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);(0,Q.EG)(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(ze({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var i=Te(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(!o||It()||a)return!0;var s=i.getClient(),c=F(r)?t._eventFromRejectionWithPrimitive(r):ut(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});c.level=Le.Error,(0,Q.EG)(c,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var i,o=M(e)?e.message:e,a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2]);var s={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(s,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=H(t)&&t.length>0?t:(0,Q.l4)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}(),Pt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Tt=function(){function e(t){this.name=e.id,this._options=A({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=(0,Q.Rf)();this._options.setTimeout&&ge(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&ge(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&ge(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&ge(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Pt).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=wt(r,{mechanism:{data:{function:pe(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,wt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:pe(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=(0,Q.Rf)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ge(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=wt(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:pe(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,wt(r,{mechanism:{data:{function:"addEventListener",handler:pe(r),target:e},handled:!0,type:"instrument"}}),i)}})),ge(n,"removeEventListener",(function(e){return function(t,n,r){var i,o=n;try{var a=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(e){}return e.call(this,t,o,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in r&&"function"==typeof r[e]&&ge(r,e,(function(t){var n={mechanism:{data:{function:e,handler:pe(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=pe(t.__sentry_original__)),wt(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),bt=function(){function e(t){this.name=e.id,this._options=A({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Te().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,Q.jH)(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&ze({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,P(t))},type:"console"}),this._options.dom&&ze({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,P(t))},type:"dom"}),this._options.xhr&&ze({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,P(t))},type:"xhr"}),this._options.fetch&&ze({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,P(t))},type:"fetch"}),this._options.history&&ze({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,P(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:Le.fromString(e.level),message:fe(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(fe(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}Te().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?ce(e.event.target,n):ce(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&Te().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,o=t.body;Te().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:o})}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Te().addBreadcrumb({category:"fetch",data:e.fetchData,level:Le.Error,type:"http"},{data:e.error,input:e.args}):Te().addBreadcrumb({category:"fetch",data:A(A({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=(0,Q.Rf)(),n=e.from,r=e.to,i=(0,Q.en)(t.location.href),o=(0,Q.en)(n),a=(0,Q.en)(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),Te().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),Rt=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){$((function(t,n){var r=Te().getIntegration(e);if(r){var i=r._handler&&r._handler.bind(r);return"function"==typeof i?i(t,n):t}return t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&z(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=P(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!z(e[t],Error)||n.length+1>=this._limit)return n;var r=st(it(e[t]));return this._walkErrorTree(e[t],t,P([r],n))},e.id="LinkedErrors",e}(),Nt=(0,Q.Rf)(),Lt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){$((function(t){var n,r,i;if(Te().getIntegration(e)){if(!Nt.navigator&&!Nt.location&&!Nt.document)return t;var o=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(r=Nt.location)||void 0===r?void 0:r.href),a=(Nt.document||{}).referrer,s=(Nt.navigator||{}).userAgent,c=A(A(A({},null===(i=t.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),l=A(A({},o&&{url:o}),{headers:c});return A(A({},t),{request:l})}return t}))},e.id="UserAgent",e}(),Dt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var r=n().getIntegration(e);if(r){try{if(r._shouldDropEvent(t,r._previousEvent))return null}catch(e){return r._previousEvent=t}return r._previousEvent=t}return t}))},e.prototype._shouldDropEvent=function(e,t){return!(!t||!this._isSameMessageEvent(e,t)&&!this._isSameExceptionEvent(e,t))},e.prototype._isSameMessageEvent=function(e,t){var n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!this._isSameFingerprint(e,t)||!this._isSameStacktrace(e,t))},e.prototype._getFramesFromEvent=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},e.prototype._isSameStacktrace=function(e,t){var n=this._getFramesFromEvent(e),r=this._getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=n[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0},e.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},e.prototype._isSameExceptionEvent=function(e,t){var n=this._getExceptionFromEvent(t),r=this._getExceptionFromEvent(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&this._isSameFingerprint(e,t)&&this._isSameStacktrace(e,t))},e.prototype._isSameFingerprint=function(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}},e.id="Dedupe",e}(),xt={},kt=(0,Q.Rf)();kt.Sentry&&kt.Sentry.Integrations&&(xt=kt.Sentry.Integrations);var Mt=A(A(A({},xt),e),t),Ut="6.11.0",Ht=[];function Ft(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}var Gt,Vt=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new _t(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,a=F(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(a.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?re.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):re.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){var e,t;this._isEnabled()&&!this._integrations.initialized&&(this._integrations=(e=this._options,t={},function(e){var t=e.defaultIntegrations&&N(e.defaultIntegrations)||[],n=e.integrations,r=N(Ft(t));Array.isArray(n)?r=N(r.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),Ft(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map((function(e){return e.name})),o="Debug";return-1!==i.indexOf(o)&&r.push.apply(r,N(r.splice(i.indexOf(o),1))),r}(e).forEach((function(e){t[e.name]=e,function(e){-1===Ht.indexOf(e.name)&&(e.setupOnce($,Te),Ht.push(e.name),re.log("Integration installed: "+e.name))}(e)})),Object.defineProperty(t,"initialized",{value:!0}),t))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return re.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i=!1,o=!1,a=t.exception&&t.exception.values;if(a){o=!0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=s.next();!c.done;c=s.next()){var l=c.value.mechanism;if(l&&!1===l.handled){i=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var u=e.status===K.Ok;(u&&0===e.errors||u&&i)&&(e.update(b(b({},i&&{status:K.Crashed}),{errors:e.errors||Number(o||i)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new Z((function(n){var r=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,a=b(b({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:(0,Q.DM)()),timestamp:e.timestamp||(0,Y.yW)()});this._applyClientOptions(a),this._applyIntegrationsMetadata(a);var s=t;n&&n.captureContext&&(s=J.clone(s).update(n.captureContext));var c=Z.resolve(a);return s&&(c=s.applyToEvent(a,n)),c.then((function(e){return"number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=b(b(b(b(b({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return b(b({},e),e.data&&{data:Se(e.data,t)})}))}),e.user&&{user:Se(e.user,t)}),e.contexts&&{contexts:Se(e.contexts,t)}),e.extra&&{extra:Se(e.extra,t)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var r=this.getOptions()._experiments;return(void 0===r?{}:r).ensureNoCircularStructures?Se(n):n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=he(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=he(s.value,a));var c=e.request;c&&c.url&&(c.url=he(c.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=N(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){re.error(e)}))},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate;if(!this._isEnabled())return Z.reject(new yt("SDK not enabled, will not capture event."));var s="transaction"===e.type;return!s&&"number"==typeof a&&Math.random()>a?Z.reject(new yt("Discarding event because it's not included in the random sample (sampling rate = "+a+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new yt("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||s||!o)return e;var n=o(e,t);return r._ensureBeforeSendRv(n)})).then((function(e){if(null===e)throw new yt("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!s&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e})).then(null,(function(e){if(e instanceof yt)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new yt("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(j(e))return e.then((function(e){if(!G(e)&&null!==e)throw new yt(t);return e}),(function(e){throw new yt("beforeSend rejected with "+e)}));if(!G(e)&&null!==e)throw new yt(t);return e},e}();!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(Gt||(Gt={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(Gt||(Gt={}));var Bt=function(){function e(){}return e.prototype.sendEvent=function(e){return Z.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Gt.Skipped})},e.prototype.close=function(e){return Z.resolve(!0)},e}(),jt=function(){function e(e){this._options=e,this._options.dsn||re.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new yt("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new yt("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){re.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){re.error("Error while sending session: "+e)})):re.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new Bt},e}();function zt(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function qt(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=N(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=N(e.sdk.packages||[],t.packages||[]),e):e}function Yt(e,t){var n=zt(t),r="aggregates"in e?"sessions":"session";return{body:JSON.stringify(b(b({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(e),type:r,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function Kt(e,t){var n=zt(t),r=e.type||"event",i="transaction"===r||t.forceEnvelope(),o=e.debug_meta||{},a=o.transactionSampling,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(o,["transactionSampling"]),c=a||{},l=c.method,u=c.rate;0===Object.keys(s).length?delete e.debug_meta:e.debug_meta=s;var d={body:JSON.stringify(n?qt(e,t.metadata.sdk):e),type:r,url:i?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(i){var p=JSON.stringify(b(b({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:l,rate:u}]})+"\n"+d.body;d.body=p}return d}var Wt,Zt=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;if(!this.isReady())return Z.reject(new yt("Not adding Promise due to buffer limit reached."));var n=e();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))})),n},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new Z((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);Z.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}(),Qt={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Jt=function(){function e(e){this.options=e,this._buffer=new Zt(30),this._rateLimits={},this._api=new St(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new yt("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,o=e.reject,a=Gt.fromHttpCode(n.status);this._handleRateLimit(r)&&re.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),a!==Gt.Success?o(n):i({status:a})},e.prototype._disabledUntil=function(e){var t=Qt[e];return this._rateLimits[t]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,i,o=Date.now(),a=e["x-sentry-rate-limits"],s=e["retry-after"];if(a){try{for(var c=w(a.trim().split(",")),l=c.next();!l.done;l=c.next()){var u=l.value.split(":",2),d=parseInt(u[0],10),p=1e3*(isNaN(d)?60:d);try{for(var h=(r=void 0,w(u[1].split(";"))),f=h.next();!f.done;f=h.next()){var v=f.value;this._rateLimits[v||"all"]=new Date(o+p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!s&&(this._rateLimits.all=new Date(o+(0,Q.JY)(o,s)),!0)},e}(),Xt=function(e){function t(t,n){void 0===n&&(n=function(){var e,t,n=(0,Q.Rf)();if(Me(n.fetch))return n.fetch.bind(n);var r=n.document,i=n.fetch;if("function"==typeof(null===(e=r)||void 0===e?void 0:e.createElement))try{var o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o),(null===(t=o.contentWindow)||void 0===t?void 0:t.fetch)&&(i=o.contentWindow.fetch),r.head.removeChild(o)}catch(e){re.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return i.bind(n)}());var r=e.call(this,t)||this;return r._fetch=n,r}return C(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(Kt(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(Yt(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:Ue()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new Z((function(t,i){n._fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)}))}))},t}(Jt),$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(Kt(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(Yt(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add((function(){return new Z((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)}))}))},t}(Jt),en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,n){var r=ut(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return(0,Q.EG)(r,{handled:!0,type:"generic"}),r.level=Le.Error,n&&n.event_id&&(r.event_id=n.event_id),Z.resolve(r)}(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=Le.Info),function(e,t,n,r){void 0===n&&(n=Le.Info);var i=dt(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Z.resolve(i)}(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=A(A({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):ke()?new Xt(t):new $t(t)},t}(jt),tn=function(e){function t(t){return void 0===t&&(t={}),t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Ut}],version:Ut},e.call(this,en,t)||this}return C(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),(0,Q.Rf)().document&&(this._isEnabled()?function(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new St(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else re.error("Missing dsn option in showReportDialog call");else re.error("Missing eventId option in showReportDialog call")}(A(A({},e),{dsn:e.dsn||this.getDsn()})):re.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(bt);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(Vt);!function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Wt||(Wt={}));class nn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;t.length>0&&(n=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(n),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,nn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){an(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=_.SENTRY_DSN;class cn{constructor(e){var t,n={beforeSend:(t,n)=>{if(!e.enableErrorLogging)return console.error(t.exception),null;if(!n)return t;var r=n.originalException;return r instanceof nn?on(on({},t),{},{fingerprint:[r.name]}):t},dsn:sn,environment:e.environment,release:"web-payments-sdk@".concat(_.VERSION),transport:e.transport};t=e.useGlobalHandlers?new Mt.GlobalHandlers:new Mt.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new xe,new T,new Mt.TryCatch,new Mt.Breadcrumbs,t,new Mt.LinkedErrors,new Mt.UserAgent];n.integrations=r;var i=new tn(n);this.hub=new we(i),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",e.version),e.sessionId&&t.setTag("sessionId",e.sessionId)})),e.useGlobalHandlers&&Pe(this.hub)}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e,t,n,r){this.hub.withScope((i=>{n&&i.setTag("sessionId",n),t&&i.setTag("instanceId",t),r&&Object.entries(r).forEach((e=>{var[t,n]=e;i.setTag(t,n)})),this.hub.captureException(e)}))}wrap(e){if(Object.prototype.hasOwnProperty.call(e,"__inner__"))return e;var t=this.captureException.bind(this);function n(n){try{for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(n,i)}catch(e){throw t(e),e}}return n.__inner__=e,n}}class ln extends nn{constructor(){super("Web Payments SDK is not enabled for this application"),this.name="WebSdkDisabledError",Object.setPrototypeOf(this,ln.prototype)}}class un extends nn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,un.prototype)}}class dn extends nn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,dn.prototype)}}function pn(e){return e.hostname.endsWith("localhost")||"https:"===e.protocol}var hn=new RegExp(/^[\w.-]+$/i),fn=new RegExp(/sq0at/i);function vn(e){return _.env===e}function gn(e){if(!function(e){return!(e.length<22||e.length>37)&&hn.test(e)&&!fn.test(e)}(e))throw new un;var t=e.match(/^[\w-]{22}$/),n=e.startsWith("sq0idp-"),r=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||n||r||i))throw new un;if(n&&!vn(f.production))throw new dn(f.production,_.env);if(r&&!vn(f.sandbox))throw new dn(f.sandbox,_.env)}var mn=En(60),yn=_n(60);function En(e){return 1e3*e}function _n(e){return e*mn}var Sn,Cn,In={hoursToMs:function(e){return e*yn},minutesToMs:_n,msToSeconds:function(e){return e/1e3},secondsToMs:En},An=/^_/g,wn=/(?!^)([A-Z])/g,On=/[\s_]+(?=[A-Za-z])/g,Pn=function(e){return e.replace(An,"-").replace(wn," $1").replace(On,"-").toLowerCase()},Tn=function(e,t){return"".concat(e,": ").concat(t,";")},bn=function(e){return e.reduce(((e,t)=>{var[n,r]=t;return Object.assign({},e,{[n]:r})}),{})},Rn=function(e,t){return t.some((function(t){return e instanceof t}))},Nn=function(e){try{return new URL(e),!0}catch(e){return!1}};!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(Sn||(Sn={})),function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Cn||(Cn={}));var Ln,Dn,xn,kn,Mn,Un,Hn,Fn,Gn,Vn,Bn,jn,zn,qn,Yn,Kn,Wn,Zn={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},Qn={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Ln||(Ln={}));class Jn extends nn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,Jn.prototype)}}class Xn extends nn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,n]=e;return'expected property: "'.concat(t,'" of type "').concat(n,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,Xn.prototype)}}class $n extends nn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,n]=e;return'expected property: "'.concat(t,'" of type "').concat(n,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,$n.prototype)}}class er extends nn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,er.prototype)}}class tr extends nn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,tr.prototype)}}class nr extends nn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,nr.prototype)}}class rr extends nn{constructor(){super("Something went wrong and Plaid was not properly initialized"),this.name="PlaidUninitializedError",Object.setPrototypeOf(this,rr.prototype)}}class ir extends nn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,ir.prototype)}}(Kn=Dn||(Dn={})).FOCUS_CLASS_ADDED="focusClassAdded",Kn.FOCUS_CLASS_REMOVED="focusClassRemoved",Kn.ERROR_CLASS_ADDED="errorClassAdded",Kn.ERROR_CLASS_REMOVED="errorClassRemoved",Kn.CARD_BRAND_CHANGED="cardBrandChanged",Kn.POSTAL_CODE_CHANGED="postalCodeChanged",Kn.ESCAPE="escape",Kn.SUBMIT="submit",(Yn=xn||(xn={})).CARD_NUMBER="cardNumber",Yn.CVV="cvv",Yn.EXPIRATION_DATE="expirationDate",Yn.POSTAL_CODE="postalCode",(qn=kn||(kn={})).CARD_INPUT="input",qn.CARD_INPUT_FOCUS="input.is-focus",qn.CARD_INPUT_PLACEHOLDER="input::placeholder",qn.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",qn.CARD_INPUT_ERROR="input.is-error",qn.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",qn.CARD_COMPONENT=".input-container",qn.CARD_COMPONENT_FOCUS=".input-container.is-focus",qn.CARD_COMPONENT_ERROR=".input-container.is-error",qn.CARD_INPUT_HELPER_TEXT=".message-text",qn.CARD_INPUT_HELPER_ICON=".message-icon",qn.CARD_INPUT_ERROR_TEXT=".message-text.is-error",qn.CARD_INPUT_ERROR_ICON=".message-icon.is-error",(Mn||(Mn={})).GIFT_CARD_NUMBER="giftCardNumber",(zn=Un||(Un={})).FOCUS_CLASS_ADDED="focusClassAdded",zn.FOCUS_CLASS_REMOVED="focusClassRemoved",zn.ERROR_CLASS_ADDED="errorClassAdded",zn.ERROR_CLASS_REMOVED="errorClassRemoved",zn.CARD_BRAND_CHANGED="cardBrandChanged",zn.ESCAPE="escape",zn.SUBMIT="submit",function(e){e.UNKNOWN="Unknown"}(Hn||(Hn={})),function(e){e.GIFT="Gift"}(Fn||(Fn={}));class or extends nn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(xn),...Object.values(Mn)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,or.prototype)}}class ar extends nn{constructor(e){super("Configuration property '".concat(e,"' does not exist")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,ar.prototype)}}class sr extends nn{constructor(e,t){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,sr.prototype)}}class cr extends nn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,cr.prototype)}}class lr extends nn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,lr.prototype)}}class ur extends nn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,ur.prototype)}}class dr extends nn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before a payment method can be tokenized")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,dr.prototype)}}class pr extends nn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,pr.prototype)}}class hr extends nn{constructor(e,t){var n=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(n," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,hr.prototype)}}class fr extends nn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,fr.prototype)}}class vr extends nn{constructor(e,t){var n=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(n?" (field=".concat(n,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,vr.prototype)}}class gr extends nn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,gr.prototype)}}class mr extends nn{constructor(e,t){super("".concat(e," is undefined after loading script ").concat(t,")")),this.name="ScriptLoaderError",Object.setPrototypeOf(this,mr.prototype)}}class yr extends nn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,yr.prototype)}}class Er extends nn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Er.prototype)}}class _r extends nn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,_r.prototype)}}class Sr extends nn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Sr.prototype)}}class Cr extends nn{constructor(e){super(e),this.name="StylesheetNotLoadedError",Object.setPrototypeOf(this,Sr.prototype)}}class Ir extends nn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,Ir.prototype)}}class Ar extends nn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Ar.prototype)}}(Wn=Gn||(Gn={})).APPLE_PAY="Apple Pay",Wn.CARD="Card",Wn.CASH_APP="Cash App",Wn.GOOGLE_PAY="Google Pay",Wn.GIFT_CARD="Gift Card",Wn.ACH="ACH",function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(Vn||(Vn={}));class wr{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Bn||(Bn={})),function(e){e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(jn||(jn={}));var Or,Pr,Tr,br,Rr,Nr,Lr,Dr,xr,kr,Mr,Ur=["borderColor","borderRadius","borderWidth"],Hr=["borderColor","borderWidth"],Fr=["color"],Gr=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Or||(Or={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(Pr||(Pr={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Tr||(Tr={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(br||(br={})),function(e){e.STATIC="static",e.FILL="fill"}(Rr||(Rr={})),function(e){e.LONG="long",e.SHORT="short"}(Nr||(Nr={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Lr||(Lr={})),function(e){e.LIGHT="light",e.DARK="dark"}(Dr||(Dr={})),function(e){e.SQUARED="Squared",e.SEMIROUNDED="Semirounded",e.ROUNDED="Rounded"}(xr||(xr={})),function(e){e.GBP="GBP",e.USD="USD"}(kr||(kr={}));class Vr extends nn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Vr.prototype)}}function Br(){return new Ir([Qn.UNKNOWN])}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}(Mr||(Mr={}));var jr,zr={get BACKOFF_FACTOR(){return 1.66},get REQUEST_DURATION_MAX_MS(){return 6e4},get REQUEST_TIMEOUT_MS(){return[1e4,2e4,3e4]},get RETRY_DELAY_MS(){return 200},STATUS_CODE:Mr};!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(jr||(jr={}));var qr={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},Yr={message:"The requested resource was not found.",type:"NOT_FOUND"},Kr={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},Wr={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Zr={message:"Request not authorized.",type:"UNAUTHORIZED"},Qr={message:"An unknown error has occurred",type:"UNKNOWN"};class Jr extends nn{constructor(e,t){var n=e;void 0!==t&&(n+=" (payment_method=".concat(t,")")),super(n),this.name="InternalError",Object.setPrototypeOf(this,Jr.prototype)}}class Xr extends nn{constructor(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){var{STATUS_CODE:t}=zr;switch(e){case t.UNAUTHORIZED:return Zr;case t.NOT_FOUND:return Yr;case t.TOO_MANY_REQUESTS:return Wr;case t.INTERNAL_SERVER_ERROR:return qr;case t.SERVICE_UNAVAILABLE:return Kr;default:return Qr}}(t);super("".concat(i.message," (message=").concat(n,"; url=").concat(e,")"),r),this.name="InternalHttpError",Object.setPrototypeOf(this,Xr.prototype)}}class $r extends nn{constructor(e,t,n){if(n){var r=document.getElementById(n);super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(t," from iframe id=").concat(n," which ").concat(void 0!==(null==r?void 0:r.src)?"exists":"does not exist"))}else super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(t,", no iframeID was set"));this.name="InternalMessengerTimeoutError",Object.setPrototypeOf(this,$r.prototype)}}class ei extends nn{constructor(e,t,n){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(n,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends nn{constructor(e,t){super("Invalid JSON received (status=".concat(t,"; url=").concat(e,")")),this.name="InternalInvalidJsonError",Object.setPrototypeOf(this,ti.prototype)}}class ni extends nn{constructor(e,t,n){super("Network error during request (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(n,")")),this.name="InternalNetworkError",Object.setPrototypeOf(this,ni.prototype)}}function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oi,ai,si,ci,li,ui,di,pi,hi,fi,vi=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({BrowserNotSupportedError:cr,ElementNotFoundError:Jn,InvalidApplicationIdError:un,InvalidEventListenerCallbackError:er,InvalidInputStylePropertyError:yr,InvalidInputStyleValueError:Er,InvalidOptionError:tr,InvalidPaymentRequestError:Xn,InvalidPaymentRequestUpdateError:$n,InvalidStylesError:Sr,PaymentMethodAlreadyAttachedError:ur,PaymentMethodAlreadyDestroyedError:pr,PaymentMethodNotAttachedError:dr,PaymentMethodUnsupportedError:vr,PlaidMissingNameError:nr,PlaidUninitializedError:rr,ScriptLoaderError:mr,SqError:nn,TokenizationError:Ir,UnexpectedError:Ar,VerifyBuyerError:ir,WebSdkDisabledError:ln,WebSdkEmbedError:lr},{InternalError:Jr,InternalHttpError:Xr,InternalInvalidJsonError:ti,InternalMessengerTimeoutError:$r,InternalNetworkError:ni,InternalTimeoutError:ei,InternalValidationError:Vr}),gi={BrowserNotSupportedError:cr,ElementNotFoundError:Jn,InvalidElementTypeError:hr,InvalidEventListenerCallbackError:er,InvalidOptionError:tr,InvalidPaymentRequestError:Xn,InvalidPaymentRequestUpdateError:$n,PaymentMethodUnsupportedError:vr,PlaidMissingNameError:nr,PlaidUninitializedError:rr,ScriptLoaderError:mr,TokenizationError:Ir,UnexpectedError:Ar,VerifyBuyerError:ir,WebSdkEmbedError:lr};(fi=oi||(oi={})).AlipayPayStart="ALIPAY_PAY:START",fi.AlipayPayOK="ALIPAY_PAY:OK",fi.AlipayPayError="ALIPAY_PAY:ERROR",fi.AttachStart="ATTACH:START",fi.AttachOK="ATTACH:OK",fi.AttachError="ATTACH:ERROR",fi.BuildStart="BUILD:START",fi.BuildOK="BUILD:OK",fi.BuildError="BUILD:ERROR",fi.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",fi.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",fi.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",fi.CashAppAuthStart="CASH_APP_AUTH:START",fi.CashAppAuthOK="CASH_APP_AUTH:OK",fi.CashAppAuthError="CASH_APP_AUTH:ERROR",fi.FirstInteraction="FIRST_INTERACTION:OK",fi.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",fi.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",fi.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",fi.InitializeStart="INITIALIZATION:START",fi.InitializeOK="INITIALIZATION:OK",fi.InitializeError="INITIALIZATION:ERROR",fi.LoadOK="LOAD:OK",fi.MainIframeOK="MAIN_IFRAME:OK",fi.NonceStart="NONCE:START",fi.NonceOK="NONCE:OK",fi.NonceError="NONCE:ERROR",fi.VerificationStart="VERIFICATION:START",fi.VerificationOK="VERIFICATION:OK",fi.VerificationError="VERIFICATION:ERROR",function(e){e.ExternalSessionStart="EXTERNAL_SESSION:START",e.ExternalSessionOK="EXTERNAL_SESSION:OK",e.ExternalSessionError="EXTERNAL_SESSION:ERROR",e.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",e.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",e.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK"}(ai||(ai={})),function(e){e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.Destroyed="DESTROYED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE"}(si||(si={})),(ci||(ci={})).ExperimentInteraction="EXPERIMENT_INTERACTION",function(e){e.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",e.CASH_APP_AUTH="CASH_APP_AUTH",e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(li||(li={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(ui||(ui={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(di||(di={})),(hi=pi||(pi={})).Ach="ACH",hi.Alipay="Alipay",hi.App="WebSDK",hi.ApplePay="Apple Pay",hi.Card="Card",hi.CashApp="Cash App",hi.GooglePay="Google Pay",hi.Masterpass="Masterpass",hi.GiftCard="Gift Card",hi.Fields="Fields",hi.PaymentRequest="Payment Request",hi.PaymentsUI="Payments UI";var mi,yi={CARD_NONCE_ENDPOINT:new RegExp(_.CARD_NONCE_ENDPOINT),CASH_APP_API_CUSTOMER:new RegExp(_.CASH_APP_API_CUSTOMER),CASH_APP_AUTH_ENDPOINT:new RegExp(_.CASH_APP_AUTH_ENDPOINT),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(_.GET_PRODUCT_INFORMATION_ENDPOINT),LIBRARY_RESOURCE:new RegExp("".concat(_.ASSET_BASE_URL,"/([\\w\\d.-]*/)?square").concat(_.APPENDED_FILE_NAME,"\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(_.ASSET_URL,"/main-iframe").concat(_.APPENDED_FILE_NAME))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(mi||(mi={}));var Ei=new Set(Object.values(si)),_i=new Set([oi.InitializeOK,ci.ExperimentInteraction]);function Si(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Si(o,r,i,a,s,"next",e)}function s(e){Si(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Ii(){return(Ii=Ci((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Jr("Promise timeout exceeded"),r=-1,i=new Promise(((e,i)=>{r=window.setTimeout((()=>{i(n)}),t)})),o=yield Promise.race([i,e()]);return window.clearTimeout(r),o}))).apply(this,arguments)}var Ai,wi={timeout:function(e,t){return Ii.apply(this,arguments)}};function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){Ti(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ri(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bi(o,r,i,a,s,"next",e)}function s(e){bi(o,r,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.POST="POST",e.GET="GET"}(Ai||(Ai={}));var Ni="include",Li="cors";function Di(e,t){var n=function(e,t){return Math.floor(e*Math.pow(zr.BACKOFF_FACTOR,t))}(zr.RETRY_DELAY_MS,e-1),r=Date.now()-t,i=zr.REQUEST_DURATION_MAX_MS-r,o=zr.REQUEST_TIMEOUT_MS[e-1];return i<=n?i-o:n}function xi(e,t){return{body:e,status:t.status,statusText:t.statusText}}function ki(e){var t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);if(e)for(var n in e)e[n]&&t.append(n,e[n]);return t}function Mi(e,t,n,r){return Ui.apply(this,arguments)}function Ui(){return(Ui=Ri((function*(e,t,n,r){if(!(e.status<zr.STATUS_CODE.INTERNAL_SERVER_ERROR))return xi({},e);try{var i={};return e.status!==zr.STATUS_CODE.NO_CONTENT&&(i=yield e.json()),xi(i,e)}catch(t){throw new ti(r,e.status)}}))).apply(this,arguments)}function Hi(e,t,n){return Fi.apply(this,arguments)}function Fi(){return(Fi=Ri((function*(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now(),o=Date.now()-i,a=zr.REQUEST_DURATION_MAX_MS-o,s=null==n?void 0:n.retryOnTimeout;void 0===s&&(s=!0);var c=Math.min((null==n?void 0:n.timeout)||zr.REQUEST_TIMEOUT_MS[r-1],a),l=null;void 0!==window.AbortController&&null!==window.AbortController&&(l=new window.AbortController);var u=Pi(Pi({credentials:Ni},t),{},{mode:Li,signal:l?l.signal:null});try{var d=yield wi.timeout(window.fetch.bind(null,e,u),c,new ei(r,o,e));return yield Mi(d,r,o,e)}catch(a){var p=0;if(a instanceof ei)l&&l.abort();else{if(a instanceof ti)throw a;if(p=Di(r,i),!s||p<=0)throw new ni(r,o,e)}if(!s||r===zr.REQUEST_TIMEOUT_MS.length)throw a;return new Promise((o=>{setTimeout((()=>{o(Hi(e,t,n,r+1,i))}),p)}))}}))).apply(this,arguments)}var Gi,Vi,Bi,ji,zi,qi=function(e,t){var n=ki(t&&t.headers);return Hi(e,{body:JSON.stringify(t.body),headers:n,method:Ai.POST},t)},Yi={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function Ki(){if(g.windowLocation===g.windowParentLocation)return g.windowLocation;var e=g.documentReferrer;return e&&0!==e.length?(Gi||(Gi=document.createElement("a")),Gi.href="".concat(e),{hash:Gi.hash,host:Gi.host,hostname:Gi.hostname,href:Gi.href,origin:Gi.origin,pathname:Gi.pathname,port:Gi.port,protocol:Gi.protocol,search:Gi.search,toString(){return this.href}}):Yi}function Wi(e,t){var n={};return Object.keys(e).forEach((r=>{"object"==typeof e[r]&&!Array.isArray(e[r])&&t[r]?n[r]=Wi(e[r],t[r]):n[r]=t[r]||e[r]})),n}(zi=Vi||(Vi={})).CA="CA",zi.GB="GB",zi.US="US",function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(Bi||(Bi={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES",e.esUS="es-US"}(ji||(ji={}));var Zi={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"Security code",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C. P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Qi={en:ji.enUS,es:ji.esES,fr:ji.frFR,ja:ji.jaJP},Ji=Qi[Bi.en];class Xi{constructor(e){this.currentLocale=Ji,this.currentTranslations=Zi[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),n=this.getRegionFromLocale(e),r=this.currentLocale;if(Zi[e])this.currentLocale=e;else{if(!Bi[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(n," are both unsupported."),newLocale:this.currentLocale,previousLocale:r};this.currentLocale=Qi[t]}this.currentTranslations=Zi[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return n&&i&&n.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(n," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:r}:{newLocale:this.currentLocale,previousLocale:r}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?Wi(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var $i="INVALID_VALUE",eo="SANITIZED",to=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),no=new Set(["includeInputLabels","postalCode","style"]),ro=new Set(["includeInputLabels","style"]),io=new Set(["lineItems","total","shippingOptions","shippingContact"]),oo=new Set(["buttonColor","buttonSizeMode","buttonType"]),ao=yo(jn),so=yo(Dn),co=yo(Un),lo=yo(Vn),uo=yo(xn),po=yo(Mn),ho=yo(ji),fo=yo(br),vo=yo(Rr),go=yo(Nr),mo=yo(kr);function yo(e){return new Set(Object.values(e))}function Eo(e){return JSON.stringify({value:e})}function _o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,a]=e;if(t.has(o)){var s=a;n.has(o)?s=eo:r[o]&&(s=r[o].has(a)?a:$i),i[o]=s}})),JSON.stringify(i)}var So=function(e,t,n){switch(e){case si.Configured:case si.ConfigUpdated:return function(e,t){switch(e){case pi.Card:case pi.GiftCard:return function(e,t){return _o(t,e===pi.Card?no:ro)}(e,t);case pi.GooglePay:return function(e){return _o(e,oo,void 0,{buttonColor:fo,buttonSizeMode:vo,buttonType:go})}(t);case pi.PaymentRequest:return function(e){return _o(e,to,io,{currencyCode:mo})}(t)}return $i}(t,n);case si.Focused:return Eo(function(e,t){if("string"!=typeof t)return $i;switch(e){case pi.Card:if(uo.has(t))return t;break;case pi.GiftCard:if(po.has(t))return t}return $i}(t,n));case si.SetLocale:return Eo(function(e){return"string"!=typeof e?$i:ho.has(e)?e:$i}(n));case si.EventListenerAdded:return Eo(function(e,t){if("string"!=typeof t)return $i;switch(e){case pi.Ach:if(ao.has(t))return t;break;case pi.Card:if(so.has(t))return t;break;case pi.GiftCard:if(co.has(t))return t;break;case pi.PaymentRequest:if(lo.has(t))return t}return $i}(t,n));case si.Destroyed:case si.RecalculatedSize:default:return""}};function Co(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function Io(e,t){return Boolean(e.querySelector(t))}function Ao(e,t){return void 0!==e[t]}var wo=function(e){var t,n=Ao(e,"angular"),r=Io(e.document,"[ng-version]")||Ao(e,"getAllAngularRootElements")||Ao(e,"getAngularVersion"),i=Ao(e,"bootstrap"),o=Ao(e,"Ember"),a=Ao(e,"jQuery"),s=Io(e.document,'form[action*="paypal.com"]'),c=function(e){return Co(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=Io(e.document,"*[data-reactroot]");if(t)return t;return Co(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=Ao(e,"__NUXT__")||Ao(e,"$nuxt"),n=Ao(e,"__VUE__");if(n||t)return n||t;return Co(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:r,angularJS:n,bootstrap:i,ember:o,jquery:a,nextJS:Ao(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:s,preact:c,react:l,vue:u};return bn(Object.entries(d).filter((e=>{var[t,n]=e;return!0===n})))};function Oo(e,t){var n=g.windowPerformance;if(!n||"function"!=typeof n.getEntriesByType)return null;var r=function(e,t,n){var r=e.filter((e=>e.initiatorType===t&&n.test(e.name)));return r[r.length-1]}([...n.getEntriesByType("resource"),...n.getEntriesByType("navigation")],e,t);return r?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(r)):null}var Po=function(e){switch(e){case li.CASH_APP_AUTH:return Oo(mi.fetch,yi.CASH_APP_AUTH_ENDPOINT);case li.CASH_APP_API_CUSTOMER:return Oo(mi.fetch,yi.CASH_APP_API_CUSTOMER);case li.GET_PRODUCT_INFORMATION:return Oo(mi.fetch,yi.GET_PRODUCT_INFORMATION_ENDPOINT);case li.MAIN_IFRAME:return Oo(mi.navigation,yi.MAIN_IFRAME_RESOURCE);case li.LOAD:return Oo(mi.script,yi.LIBRARY_RESOURCE);case li.NONCE:return Oo(mi.fetch,yi.CARD_NONCE_ENDPOINT);default:return null}};function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){Ro(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var No,Lo=_.METRICS_URL,Do=_.METRICS_V2_URL;class xo{constructor(e,t){this.sdkVersion=_.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,t,n,r){try{var i={origin:Ki().origin},o={innerHeight:g.windowInnerHeight,innerWidth:g.windowInnerWidth,language:g.windowNavigationLanguage},a=this.eventDuration(e,r),{event:s,eventSource:c,eventConfigurationValues:l,internalConfigurationValues:u}=e,d=this.sdkVersion,p=this.metricsSession(t,n),h={appLocation:i,avt:this.avt,browserData:o,event:s,eventSource:c,paymentMethodTrackingId:r,sdkVersion:d,session:p};void 0!==l&&(v=s,Ei.has(v))&&(h.eventConfigurationValues=So(s,c,l)),void 0!==u&&function(e){return _i.has(e)}(s)&&(h.internalConfigurationValues=JSON.stringify(u)),a&&(h.duration=a),s===oi.InitializeOK&&(h.jsFramework=this.getJSFrameworkValue());var f=!1;s!==oi.NonceOK&&s!==si.Destroyed||(f=!0),this.postMetricsEvent(h,f)}catch(e){this.errorLogger.captureException(e)}var v}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(wo(window))),this.jsFramework}eventDuration(e,t){var[n,r]=e.event.split(":");if(n in ui){var i;if(n===ui.INITIALIZATION?i=n:t&&(i="".concat(n,":").concat(t)),!i)return null;if(r===di.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(r===di.OK||r===di.ERROR){var a=this.manualTelemetryStarts[i];return void 0===a?null:(delete this.manualTelemetryStarts[i],Date.now()-a)}}return r!==di.START&&n in li?Po(n):null}postMetricsEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&g.windowNavigationBeacon&&g.documentVisibilityState?(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===g.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))):qi(Lo,{body:e}).catch((e=>{this.errorLogger.captureException(e)}))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Do,e)}catch(e){this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),qi(Do,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t){return bo(bo({},this.applicationData),{},{instanceId:e,sessionId:t})}}!function(e){e.ACH="ACH",e.ALIPAY="ALIPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP="CASH_APP",e.GOOGLE_PAY="GOOGLE_PAY"}(No||(No={})),_.HYDRATION_ENDPOINT;var ko,Mo,Uo,Ho="INITIALIZE",Fo="UPDATE_SESSION";(Uo=ko||(ko={})).CanUseOverrideStrings="can_use_override_strings",Uo.CanUseWebSDK="can_use_websdk",Uo.CanUseInterac="can_use_interac",Uo.CanUsePaymentsUI="can_use_payments_ui",Uo.PostalCodeValidationByAVTExperiment="postal_code_validation_by_avt_experiment",function(e){e.Control="C",e.TreatmentA="T1"}(Mo||(Mo={}));var Go={[ko.CanUseWebSDK]:{false:Mo.Control,true:Mo.TreatmentA},[ko.CanUseInterac]:{false:Mo.Control,true:Mo.TreatmentA},[ko.CanUseOverrideStrings]:{false:Mo.Control,true:Mo.TreatmentA},[ko.CanUsePaymentsUI]:{false:Mo.Control,true:Mo.TreatmentA},[ko.PostalCodeValidationByAVTExperiment]:{[Mo.Control]:Mo.Control,[Mo.TreatmentA]:Mo.TreatmentA}};class Vo{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==Mo.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Go[e][t]||Mo.Control}}var Bo,jo="LOCALE_CHANGED_EVENT";class zo extends class{constructor(e,t){this.errorLogger=e,this.messenger=t}}{constructor(e,t,n,r,i,o,a,s){super(e,t),this.session=r,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=n,this.eventTarget=a,this.featureFlagHandler=new Vo(s),this.featureFlagValues=s}addLocaleChangedListener(e){this.eventTarget.addEventListener(jo,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(jo,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(jo,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(Fo,{options:{session:this.session.serialize()}})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var n=this.localeStrings.getCurrentLocale();return this.session.setLocale(n),this.eventTarget.dispatchEvent(jo,n),this.messenger.sendOneWayMessage(Fo,{options:{session:this.session.serialize()}}),t}setSessionId(e){this.session.setSessionId(e),this.messenger.sendOneWayMessage(Fo,{options:{session:this.session.serialize()}})}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}function qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/api/paymentform".concat(e)}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/apple-pay".concat(e)}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.WALLET_NOT_REQUESTED="WALLET_NOT_REQUESTED"}(Bo||(Bo={}));var Ko,Wo={APPLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},APPLE_PAY_DEVICE_NOT_SUPPORTED:{message:"Device does not support Apple Pay.\nSee:".concat(Yo("#prerequisites-and-assumptions"),"."),type:"DEVICE_NOT_SUPPORTED"},APPLE_PAY_NOT_REGISTERED:{message:"No active card available in the Apple Wallet or domain not registered.",type:"NOT_REGISTERED"},GOOGLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Browser does not support Google Pay. \nSee: ".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/google-pay".concat(e)}("#prerequsites-and-assumptions")),type:"BROWSER_NOT_SUPPORTED"},INVALID_CONFIG:{message:"Configuration is invalid.",type:"INVALID_CONFIG"},UNKNOWN:{message:"An unknown error has occurred.",type:"UNKNOWN"},WALLET_NOT_REQUESTED:{message:"Wallet is not specified in the payment request config.\nSee:".concat(qo("#paymentform-configurationfields")),type:"WALLET_NOT_REQUESTED"}};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.INACTIVE_PLATFORM_ACCOUNT="INACTIVE_PLATFORM_ACCOUNT",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(Ko||(Ko={}));var Zo={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},INACTIVE_PLATFORM_ACCOUNT:{field:"accountId",message:"The platform account associated with provided accountId is inactive.",type:"INACTIVE_PLATFORM_ACCOUNT"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: ".concat(qo("#paymentform-configurationfields")),type:"MISSING_LOCATION_ID"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's Apple Pay status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: ".concat(Yo("#production-configuration")),type:"DOMAIN_NOT_REGISTERED"}};class Qo extends nn{constructor(e,t,n){var r="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");n&&(r+=" and must be a(n) ".concat(n)),super("".concat(r,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,Qo.prototype)}}class Jo extends nn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Jo.prototype)}}class Xo{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0;r<n.length;r++)n[r]===t&&(n.splice(r,1),r--)}dispatchEvent(e,t){if(e in this.listeners)for(var n=new wr(e,t),r=[...this.listeners[e]],i=0,o=r.length;i<o;i++)r[i](n)}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var $o,ea=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}($o||($o={}));var ta,na;!function(e){e.PLAID="window.Plaid",e.ANALYTICS="window.Square.Analytics",e.GOOGLE="window.google.payments"}(ta||(ta={})),function(e){e.ANALYTICS="square-payments-analytics-link-script",e.GOOGLE="square-payments-google-link-script",e.PLAID="square-payments-plaid-link-script"}(na||(na={}));var ra={};function ia(e,t,n,r){var i=r();if(i)return Promise.resolve(i);if(ra[t])return ra[t];var o=document.createElement("script");return o.id=e,o.src=n,ra[t]=new Promise(((e,i)=>{o.onload=()=>{var o=r();o?e(o):i(new mr(t,n))},o.onerror=()=>{i(new mr(t,n))}})),document.body.appendChild(o),ra[t]}var oa,aa=function(){return ia(na.ANALYTICS,ta.ANALYTICS,_.ANALYTICS_PUBLIC_ENDPOINT,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.Square)||void 0===t?void 0:t.Analytics}))},sa=function(){return ia(na.GOOGLE,ta.GOOGLE,_.GOOGLE_PAY_SCRIPT_URL,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t?void 0:t.payments}))},ca=function(){return ia(na.PLAID,ta.PLAID,_.PLAID_LINK_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Plaid}))};function la(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ua(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){la(o,r,i,a,s,"next",e)}function s(e){la(o,r,i,a,s,"throw",e)}a(void 0)}))}}var da=In.hoursToMs(2);function pa(e){var{applicationId:t,locationId:n}=e;return oa||(oa=aa().then((e=>new e(t,{locationId:n}))))}function ha(){return(ha=ua((function*(e){var t=yield pa(e);return new Promise((e=>{t.getToken(e)}))}))).apply(this,arguments)}function fa(){return(fa=ua((function*(e,t,n){var r=yield pa(e);return new Promise(((e,i)=>{r.verifyBuyer(t,n,((t,n)=>{t?i(t):e(n)}))}))}))).apply(this,arguments)}var va={getToken:function(e){return ha.apply(this,arguments)},resetLibraryCache:function(){oa=void 0},verifyBuyer:function(e,t,n){return fa.apply(this,arguments)}};class ga{constructor(e){this.eventTarget=new Xo,this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,t){this.eventTarget.addEventListener(e,t)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve()}detach(){return Promise.resolve()}dispatchEvent(e,t){this.eventTarget.dispatchEvent(e,t)}}var ma,ya,Ea={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};function _a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Sa(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_a(o,r,i,a,s,"next",e)}function s(e){_a(o,r,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.CREATE_PLAID_LINK_SESSION="CREATE_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(ma||(ma={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(ya||(ya={}));var Ca,Ia,Aa,wa,Oa,Pa,Ta,ba=["US"],Ra=["auth"],Na=new Set(["en","es"]),La=new Set(["ITEM_ERROR"]);class Da extends ga{constructor(e,t){if(super(t),this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.Plaid=e,!this.session.locationId)throw new vr(Wo.INVALID_CONFIG,"locationId")}tokenize(e){var t=this;return Sa((function*(){if(t.isDestroyed)throw new pr(Gn.ACH);if(t.tokenizeInProgress)throw new Ir([Ea]);if(!e||!e.accountHolderName)throw new nr;t.tokenizeInProgress=!0;var n=yield t.createPlaidLinkSession(),r=yield t.openPlaidLink(n.plaidLinkToken);return r.status===ya.SUCCESS&&r.publicToken&&r.selectedBankAccountId?t.requestAchBankNonce(e.accountHolderName,r.publicToken,r.selectedBankAccountId,n.gringottsSessionToken):{status:Bn.CANCEL}}))()}destroy(){return this.isDestroyed=!0,this.metricsHandler.logEvent(si.Destroyed),this.handler&&(this.handler.exit({force:!0}),this.handler.destroy(),this.deleteHandler()),Promise.resolve()}addEventListener(e,t){this.metricsHandler.logEvent(si.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}openPlaidLink(e){var t=this.errorLogger,n=this.session,r=this.metricsHandler;this.handleFirstInteraction();var i=new Promise(((i,o)=>{var a=g.windowNavigationLanguage.split("-")[0];Na.has(a)||(a="en"),this.plaidHandler=this.Plaid.create({clientName:"Square, Inc.",countryCodes:ba,env:_.PLAID_LINK_ENV,language:a,onEvent:(e,r)=>{e!==jn.ERROR||La.has(r.error_type)||t.captureException(new Jr("PlaidErrorEvent: ".concat(JSON.stringify(r)),Gn.ACH),n.instanceId,n.sessionId),super.dispatchEvent(e,r)},onExit:(e,o)=>{e&&(r.logEvent(ai.ExternalSessionError),La.has(e.error_type)||t.captureException(new Jr("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(o)),n.instanceId,n.sessionId)),this.tokenizeInProgress=!1,this.deleteHandler(),i({status:ya.CANCEL})},onSuccess(e,a){if(!a||!a.accounts||!a.accounts[0]){r.logEvent(ai.ExternalSessionError);var s=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(a)));return t.captureException(s,n.instanceId,n.sessionId),void o(s)}r.logEvent(ai.ExternalSessionOK),i({publicToken:e,selectedBankAccountId:a.accounts[0].id,status:ya.SUCCESS})},product:Ra,token:e})}));return r.logEvent(ai.ExternalSessionStart),this.plaidHandler.open(),i}createPlaidLinkSession(){var e=this;return Sa((function*(){var t=e.session,n={createPlaidLinkSessionRequest:{clientId:t.applicationId}};try{return yield e.messenger.request(ma.CREATE_PLAID_LINK_SESSION,{options:{paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),session:t},payload:n})}catch(t){throw e.tokenizeInProgress=!1,t}}))()}requestAchBankNonce(e,t,n,r){var i=this;return Sa((function*(){var o={accountHolderName:e,gringottsSessionToken:r,plaidPublicToken:t,selectedPlaidBankAccountId:n},a=i.session,s={bankNonceRequest:{clientId:a.applicationId,paymentMethodTrackingId:i.context.getPaymentMethodTrackingId(),plaidLinkData:o,sessionId:a.sessionId,websdkVersion:_.VERSION,websiteUrl:a.sourceUrl}};try{var c=yield i.messenger.request(ma.REQUEST_ACH_BANK_NONCE,{options:{paymentMethodTrackingId:i.context.getPaymentMethodTrackingId(),session:a},payload:s});return i.deleteHandler(),i.tokenizeInProgress=!1,i.context.setSessionId(c.sessionId),i.context.setPaymentMethodTrackingId(c.paymentMethodTrackingId),i.wasFirstInteractionCalled=!1,{details:{bankAccount:c.accountDetails,method:Gn.ACH},status:Bn.OK,token:c.bankNonce}}catch(e){throw i.deleteHandler(),i.tokenizeInProgress=!1,e instanceof Ir?e:new Ir([Zn.UNKNOWN])}}))()}get plaidHandler(){if(!this.handler){var e=new Jr("The plaid handler was not properly created.",Gn.ACH);throw this.errorLogger.captureException(e,this.session.instanceId,this.session.sessionId),new rr}return this.handler}set plaidHandler(e){this.handler=e}deleteHandler(){delete this.handler}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oi.FirstInteraction))}}function xa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.redirectURI)throw new tr("redirectURI missing");if(!e.transactionId)throw new tr("transactionId missing");if(t){if(!e.totalTransactionAmount)throw new tr("totalTransactionAmount required");if(!Number.isInteger(e.totalTransactionAmount.amount)||e.totalTransactionAmount.amount<=0)throw new tr("totalTransactionAmount.amount must be a positive integer")}}function ka(e,t){var n=e;return e instanceof nn||(n=new nn,t.captureException(e)),{errors:[n],status:Bn.ERROR}}function Ma(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}!function(e){e.REQUEST_ALIPAY_PAY="REQUEST_ALIPAY_PAY"}(Ca||(Ca={}));class Ua extends ga{constructor(e,t){if(super(e),!this.session.locationId)throw new tr("locationId must be provided for Alipay");if(this.locationId=this.session.locationId,xa(t,!0),this.redirectUri=t.redirectURI,this.totalTransactionAmount=t.totalTransactionAmount,t.transactionId.length>64)throw new tr("transactionId too long. Should be less than ".concat(64," characters."));this.transactionId=t.transactionId}tokenize(){var e,t=this;return(e=function*(){try{var e=yield t.fetchRedirectActionForm();return t.redirect(e),new Promise((()=>{}))}catch(e){return ka(e,t.context.errorLogger)}},function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ma(o,r,i,a,s,"next",e)}function s(e){Ma(o,r,i,a,s,"throw",e)}a(void 0)}))})()}fetchRedirectActionForm(){return this.messenger.request(Ca.REQUEST_ALIPAY_PAY,{options:{session:this.session},payload:{client_id:this.session.applicationId,location_id:this.locationId,redirect_uri:this.redirectUri,total_transaction_amount:{amount:this.totalTransactionAmount.amount,currency_code:this.totalTransactionAmount.currencyCode},transaction_id:this.transactionId}})}redirect(e){var t="alipay_".concat(this.transactionId),n=document.createElement("form");if(n.setAttribute("id",t),n.setAttribute("action",e.redirect_url),n.setAttribute("method",e.method),n.setAttribute("style","display:none"),e.parameters.length>0){var r=JSON.parse(e.parameters);Object.keys(r).forEach((e=>{var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name",e),t.setAttribute("value",r[e]),n.appendChild(t)}))}g.documentBody.appendChild(n),g.submitForm(n)}}(Aa=Ia||(Ia={})).UNKNOWN="unknown",Aa.AMERICAN_EXPRESS="americanExpress",Aa.DISCOVER="discover",Aa.DISCOVER_DINERS="discoverDiners",Aa.JCB="JCB",Aa.MASTER_CARD="masterCard",Aa.UNION_PAY="unionPay",Aa.VISA="visa",Aa.SQUARE_GIFT_CARD_V2="squareGiftCardV2",Aa.INTERAC="interac",Aa.SQUARE_CAPITAL_CARD="squareCapitalCard",Aa.EFTPOS="eftpos",xn.CARD_NUMBER,xn.CVV,xn.EXPIRATION_DATE,xn.POSTAL_CODE,(Ta=wa||(wa={})).CARD_BRAND_CHANGED="cardBrandChanged",Ta.ERROR_CLASS_ADDED="errorClassAdded",Ta.ERROR_CLASS_REMOVED="errorClassRemoved",Ta.FOCUS_CLASS_ADDED="focusClassAdded",Ta.FOCUS_CLASS_REMOVED="focusClassRemoved",Ta.POSTAL_CODE_CHANGED="postalCodeChanged",Ta.SET_POSTAL_COUNTRY="setPostalCountry",Ta.ESCAPE="escape",Ta.SUBMIT="submit",(Pa=Oa||(Oa={})).ERROR="error",Pa.FOCUS="focus",Pa.UNKNOWN="unknown";var Ha,Fa='<svg width="36" height="24" viewBox="0 0 36 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="36" height="24" rx="4" fill="url(#paint0_linear)"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21.9945 6H14.0055C12.898 6 12 6.89774 12 8.00545V15.9945C12 17.1023 12.898 18 14.0055 18H21.9945C23.1023 18 24 17.1023 24 15.9945V8.00545C24.0003 6.89774 23.1025 6 21.9945 6ZM21.8184 15.1862C21.8184 15.5358 21.535 15.8188 21.1857 15.8188H14.8156C14.466 15.8188 14.1827 15.5358 14.1827 15.1862V8.81583C14.1827 8.46622 14.466 8.18288 14.8156 8.18288H21.1857C21.535 8.18288 21.8184 8.46622 21.8184 8.81583V15.1862ZM16.3632 13.2709C16.3632 13.4725 16.5258 13.6361 16.7265 13.6361H19.273C19.4742 13.6361 19.6362 13.4725 19.6362 13.2709V10.7283C19.6362 10.5267 19.4742 10.3631 19.273 10.3631H16.7265C16.5258 10.3631 16.3632 10.5267 16.3632 10.7283V13.2709Z" fill="white"/>\n<defs>\n<linearGradient id="paint0_linear" x1="-35.0542" y1="-28.0664" x2="-35.0542" y2="42.6725" gradientUnits="userSpaceOnUse">\n<stop stop-color="#626364"/>\n<stop offset="1" stop-color="#414447"/>\n</linearGradient>\n</defs>\n</svg>\n',Ga='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.backst0{fill:url(#SVGID_1_);}\n\t.backst1{fill:#343434;}\n\t.backst2{opacity:0.15;}\n\t.backst3{opacity:0.3036;fill:#FFFFFF;enable-background:new    ;}\n\t.backst4{fill:#FFFFFF;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="54.0664" x2="18" y2="-16.6725" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#626364"/>\n\t<stop  offset="1" style="stop-color:#414447"/>\n</linearGradient>\n<path class="backst0 sq-unknown-card-bg" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<rect y="4" class="backst1" width="36" height="5"/>\n<circle id="shadow" class="backst2" cx="24" cy="12.5" r="8.5"/>\n<rect x="4" y="11" class="backst3" width="24" height="3"/>\n<path class="backst4" d="M24,20c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8s-8,3.6-8,8C16,16.4,19.6,20,24,20z"/>\n<path class="backst1" d="M27,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S26.4,13,27,13z"/>\n<path class="backst1" d="M24,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S23.4,13,24,13z"/>\n<path class="backst1" d="M21,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S20.4,13,21,13z"/>\n</svg>\n',Va='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#FFFFFF;fill-opacity:0.3;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="54.0664" x2="18" y2="-16.6725" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#626364"/>\n\t<stop  offset="1" style="stop-color:#414447"/>\n</linearGradient>\n<path class="st0 sq-unknown-card-bg" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<path class="st1" d="M7,12h22c0.6,0,1,0.4,1,1l0,0c0,0.6-0.4,1-1,1H7c-0.6,0-1-0.4-1-1l0,0C6,12.4,6.4,12,7,12z"/>\n<path class="st1" d="M6.5,17h6c0.3,0,0.5,0.2,0.5,0.5l0,0c0,0.3-0.2,0.5-0.5,0.5h-6C6.2,18,6,17.8,6,17.5l0,0C6,17.2,6.2,17,6.5,17z\n\t"/>\n</svg>\n',Ba='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.backst0{fill:url(#SVGID_1_);stroke:#EAEAEA;stroke-width:0.5;}\n\t.backst1{fill:#343434;}\n\t.backst2{opacity:0.1;}\n\t.backst3{opacity:0.2512;fill:#9B9B9B;enable-background:new    ;}\n\t.backst4{fill:#FFFFFF;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="45.2133" x2="18" y2="-38.2332" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#FFFFFF"/>\n\t<stop  offset="1" style="stop-color:#EAEAEA"/>\n</linearGradient>\n<path class="backst0" d="M4,0.2h28c2.1,0,3.8,1.7,3.8,3.8v16c0,2.1-1.7,3.8-3.8,3.8H4c-2.1,0-3.8-1.7-3.8-3.8V4C0.2,1.9,1.9,0.2,4,0.2z"\n\t/>\n<rect y="4" class="backst1" width="36" height="5"/>\n<circle id="shadow" class="backst2" cx="24" cy="12.5" r="8.5"/>\n<rect x="4" y="11" class="backst3" width="24" height="3"/>\n<path class="backst4" d="M24,20c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8s-8,3.6-8,8C16,16.4,19.6,20,24,20z"/>\n<path class="backst1" d="M27,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S26.4,13,27,13z"/>\n<path class="backst1" d="M24,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S23.4,13,24,13z"/>\n<path class="backst1" d="M21,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S20.4,13,21,13z"/>\n</svg>\n',ja={JCB:{back:Ba,front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#EAEAEA;}\n\t.st2{fill:#006DB9;}\n\t.st3{fill:#E20238;}\n\t.st4{fill:#54B330;}\n</style>\n<g>\n\n\t\t<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="45.2133" x2="18" y2="-38.2332" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t\t<stop  offset="0" style="stop-color:#FFFFFF"/>\n\t\t<stop  offset="1" style="stop-color:#EAEAEA"/>\n\t</linearGradient>\n\t<path class="st0" d="M3.8,23.8c-1.9,0-3.5-1.6-3.5-3.5V3.8c0-1.9,1.6-3.5,3.5-3.5h28.5c1.9,0,3.5,1.6,3.5,3.5v16.5\n\t\tc0,1.9-1.6,3.5-3.5,3.5H3.8z"/>\n\t<path class="st1" d="M32.2,0.5c1.8,0,3.2,1.5,3.2,3.2v16.5c0,1.8-1.5,3.2-3.2,3.2H3.8c-1.8,0-3.2-1.5-3.2-3.2V3.8\n\t\tC0.5,2,2,0.5,3.8,0.5H32.2 M32.2,0H3.8C1.7,0,0,1.7,0,3.8v16.5C0,22.3,1.7,24,3.8,24h28.5c2.1,0,3.8-1.7,3.8-3.8V3.8\n\t\tC36,1.7,34.3,0,32.2,0L32.2,0z"/>\n</g>\n<path class="st2" d="M11,7.8c0-1,0.8-1.8,1.8-1.8H15v10.2c0,1-0.8,1.8-1.8,1.8H11V7.8z"/>\n<path class="st3" d="M16,7.8c0-1,0.8-1.8,1.8-1.8H20v10.2c0,1-0.8,1.8-1.8,1.8H16V7.8z"/>\n<path class="st4" d="M21,7.8c0-1,0.8-1.8,1.8-1.8H25v10.2c0,1-0.8,1.8-1.8,1.8H21V7.8z"/>\n</svg>\n'},americanExpress:{back:'<svg width="36" height="24" viewBox="0 0 36 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="36" height="24" rx="4" fill="#016FD0"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M28.2341 8L27.1171 9.24794L26.039 8H15.6927L14.8683 10.0292L13.9756 8H9.93659L9.70732 8.00507H6.29268L3 16H6.90244L7.39024 14.7571H8.52195L9.00976 16H25.9512L27.0732 14.7368L28.1507 16H32.9707L29.478 12.0127L33 8H28.2341ZM28.7024 9.12112H30.561L28.0093 12.0025L30.5122 14.8687H28.639L27.0878 13.0572L25.4732 14.8687H19.6488V9.12112H25.5512L27.1024 10.9169L28.7024 9.12112ZM16.4146 9.12112H18.658L18.6439 14.8687H17.1805V10.7744L15.439 14.8687H14.2195L12.4629 10.7647V14.8687H9.73171L9.2439 13.6259H6.65854L6.17073 14.8687H4.61463L6.97512 9.12112H8.98049L11.0488 14.1281V9.12112H13.2683L14.9117 12.8091L16.4146 9.12112ZM24.0488 10.435H21.0683V11.2974H23.9951V12.5905H21.0683V13.5549H24.0732V14.3259L26.1707 11.9822L24.0732 9.54673L24.0488 10.435ZM7.18049 12.3069H8.72683L7.95122 10.3538L7.18049 12.3069Z" fill="white"/>\n<g opacity="0.95" filter="url(#filter0_d)">\n<path d="M24 20C28.4183 20 32 16.4183 32 12C32 7.58172 28.4183 4 24 4C19.5817 4 16 7.58172 16 12C16 16.4183 19.5817 20 24 20Z" fill="white"/>\n</g>\n<path d="M27 13C27.5523 13 28 12.5523 28 12C28 11.4477 27.5523 11 27 11C26.4477 11 26 11.4477 26 12C26 12.5523 26.4477 13 27 13Z" fill="#343434"/>\n<path d="M24 13C24.5523 13 25 12.5523 25 12C25 11.4477 24.5523 11 24 11C23.4477 11 23 11.4477 23 12C23 12.5523 23.4477 13 24 13Z" fill="#343434"/>\n<path d="M21 13C21.5523 13 22 12.5523 22 12C22 11.4477 21.5523 11 21 11C20.4477 11 20 11.4477 20 12C20 12.5523 20.4477 13 21 13Z" fill="#343434"/>\n<defs>\n<filter id="filter0_d" x="15" y="4" width="18" height="18" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="0.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n</filter>\n</defs>\n</svg>\n',front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#016FD0;}\n\t.st1{fill:#FFFFFF;}\n</style>\n<path class="st0" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<path class="st1" d="M28.2,8l-1.1,1.2L26,8H15.7l-0.8,2L14,8h-4L9.7,8H6.3L3,16h3.9l0.5-1.2h1.1L9,16H26l1.1-1.3l1.1,1.3H33l-3.5-4\n\tL33,8H28.2z M28.7,9.1h1.9L28,12l2.5,2.9h-1.9l-1.6-1.8l-1.6,1.8h-5.8V9.1h5.9l1.6,1.8L28.7,9.1z M16.4,9.1h2.2l0,5.7h-1.5v-4.1\n\tl-1.7,4.1h-1.2l-1.8-4.1v4.1H9.7l-0.5-1.2H6.7l-0.5,1.2H4.6L7,9.1h2l2.1,5v-5h2.2l1.6,3.7L16.4,9.1z M24,10.4h-3v0.9H24v1.3h-2.9v1\n\th3v0.8l2.1-2.3l-2.1-2.4L24,10.4z M7.2,12.3h1.5l-0.8-2L7.2,12.3z"/>\n</svg>\n',sameSide:!0},discover:{back:Ba,front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#EAEAEA;}\n\t.st2{fill:#F4811F;}\n\t.st3{fill:#001722;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="24" x2="1" y2="24" gradientTransform="matrix(5.109625e-15 83.4465 -83.4465 5.109625e-15 2020.7161 -19.2133)">\n\t<stop  offset="0" style="stop-color:#FFFFFF"/>\n\t<stop  offset="1" style="stop-color:#EAEAEA"/>\n</linearGradient>\n<path class="st0" d="M32.2,0.5H3.8C2,0.5,0.5,2,0.5,3.8v16.5c0,1.8,1.5,3.2,3.2,3.2h28.5c1.8,0,3.2-1.5,3.2-3.2V3.8\n\tC35.5,2,34,0.5,32.2,0.5z"/>\n<path class="st1" d="M32.2,0H3.8C1.7,0,0,1.7,0,3.8v16.5C0,22.3,1.7,24,3.8,24h28.5c2.1,0,3.8-1.7,3.8-3.8V3.8C36,1.7,34.3,0,32.2,0\n\tz M35.5,20.2c0,1.8-1.5,3.2-3.2,3.2H3.8c-1.8,0-3.2-1.5-3.2-3.2V3.8C0.5,2,2,0.5,3.8,0.5h28.5c1.8,0,3.2,1.5,3.2,3.2V20.2z"/>\n<g>\n\t<path class="st2" d="M16.4,12.3c0,1.3,1,2.3,2.4,2.3l0,0c1.3,0,2.4-1,2.4-2.3l0,0c0-1.3-1-2.3-2.4-2.3l0,0\n\t\tC17.5,10,16.4,11,16.4,12.3"/>\n\t<path class="st3" d="M6.3,13.4c-0.3,0.2-0.6,0.4-1.2,0.4H4.9v-2.9h0.2c0.6,0,0.9,0.1,1.2,0.4c0.3,0.3,0.5,0.7,0.5,1.1\n\t\tC6.8,12.8,6.6,13.2,6.3,13.4 M5.3,10.1H4v4.5h1.3c0.7,0,1.2-0.2,1.6-0.5c0.5-0.4,0.8-1.1,0.8-1.7C7.7,11,6.7,10.1,5.3,10.1"/>\n\t<path class="st3" d="M8.1,14.6h0.9v-4.5H8.1V14.6z"/>\n\t<path class="st3" d="M11.1,11.8c-0.5-0.2-0.7-0.3-0.7-0.6c0-0.3,0.3-0.5,0.6-0.5c0.3,0,0.5,0.1,0.7,0.4l0.5-0.6\n\t\tc-0.4-0.3-0.8-0.5-1.3-0.5c-0.8,0-1.4,0.5-1.4,1.3c0,0.6,0.3,0.9,1.1,1.2c0.3,0.1,0.5,0.2,0.6,0.3c0.2,0.1,0.3,0.3,0.3,0.5\n\t\tc0,0.4-0.3,0.6-0.7,0.6c-0.4,0-0.7-0.2-1-0.6l-0.6,0.5c0.4,0.6,0.9,0.9,1.5,0.8c0.8,0,1.6-0.6,1.5-1.5\n\t\tC12.3,12.5,12.1,12.2,11.1,11.8"/>\n\t<path class="st3" d="M12.6,12.3c0,1.3,1,2.3,2.4,2.3c0.4,0,0.7-0.1,1.1-0.3v-1c-0.3,0.3-0.7,0.5-1.1,0.5c-0.9,0-1.5-0.6-1.5-1.5\n\t\tc0-0.9,0.6-1.5,1.5-1.5c0.4,0,0.7,0.1,1.1,0.5v-1C15.7,10.1,15.4,10,15,10C13.7,10,12.6,11,12.6,12.3"/>\n\t<path class="st3" d="M23.1,13.1l-1.2-3h-1l1.9,4.6h0.5l1.9-4.6h-0.9L23.1,13.1z"/>\n\t<path class="st3" d="M25.7,14.6h2.5v-0.8h-1.6v-1.2h1.5v-0.8h-1.5v-1h1.6v-0.8h-2.5V14.6z"/>\n\t<path class="st3" d="M29.9,12.2h-0.3v-1.3h0.3c0.5,0,0.8,0.2,0.8,0.7C30.7,11.9,30.4,12.2,29.9,12.2 M31.6,11.4\n\t\tc0-0.8-0.6-1.3-1.6-1.3h-1.3v4.5h0.9v-1.8h0.1l1.2,1.8H32l-1.4-1.9C31.3,12.5,31.6,12.1,31.6,11.4"/>\n</g>\n</svg>\n'},discoverDiners:{back:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.backst0{fill:#397EC6;}\n\t.backst1{fill:#343434;}\n\t.backst2{opacity:0.4;fill:#FFFFFF;enable-background:new    ;}\n\t.backst3{opacity:0.1;}\n\t.backst4{fill:#FFFFFF;}\n</style>\n<path class="backst0" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<rect y="4" class="backst1" width="36" height="5"/>\n<rect x="4" y="11" class="backst2" width="24" height="3"/>\n<circle id="shadow" class="backst3" cx="24" cy="12.5" r="8.5"/>\n<path class="backst4" d="M24,20c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8s-8,3.6-8,8C16,16.4,19.6,20,24,20z"/>\n<path class="backst1" d="M27,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S26.4,13,27,13z"/>\n<path class="backst1" d="M24,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S23.4,13,24,13z"/>\n<path class="backst1" d="M21,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S20.4,13,21,13z"/>\n</svg>\n',front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#397EC6;}\n\t.st1{fill:#FFFFFF;}\n\t.st2{fill:#0079BE;}\n</style>\n<path class="st0" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<path class="st1" d="M28,12.1C28,7.3,24,4,19.7,4H16c-4.4,0-8,3.3-8,8.1c0,4.4,3.6,8,8,7.9h3.7C24,20,28,16.4,28,12.1z"/>\n<path class="st2" d="M15.9,5.1c-3.8,0-6.8,3.1-6.8,6.9s3.1,6.9,6.8,6.9c3.8,0,6.8-3.1,6.8-6.9S19.7,5.1,15.9,5.1z"/>\n<path class="st1" d="M14.8,7.7C13,8.4,11.6,10,11.6,12c0,1.9,1.3,3.6,3.2,4.3V7.7z M16.9,7.7v8.5c1.8-0.7,3.2-2.3,3.2-4.3\n\tC20.1,10.1,18.8,8.4,16.9,7.7z"/>\n<rect x="14.3" y="7.1" class="st2" width="3.2" height="9.4"/>\n</svg>\n'},error:{back:Ga,front:Va},focus:{back:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.backst0{fill:url(#SVGID_1_);}\n\t.backst1{fill:#343434;}\n\t.backst2{opacity:0.15;}\n\t.backst3{opacity:0.3036;fill:#FFFFFF;enable-background:new    ;}\n\t.backst4{fill:#FFFFFF;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="54.0664" x2="18" y2="-16.6725" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#626364"/>\n\t<stop  offset="1" style="stop-color:#414447"/>\n</linearGradient>\n<path class="backst0 sq-focus-card-bg" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<rect y="4" class="backst1" width="36" height="5"/>\n<circle id="shadow" class="backst2" cx="24" cy="12.5" r="8.5"/>\n<rect x="4" y="11" class="backst3" width="24" height="3"/>\n<path class="backst4" d="M24,20c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8s-8,3.6-8,8C16,16.4,19.6,20,24,20z"/>\n<path class="backst1" d="M27,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S26.4,13,27,13z"/>\n<path class="backst1" d="M24,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S23.4,13,24,13z"/>\n<path class="backst1" d="M21,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S20.4,13,21,13z"/>\n</svg>\n',front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#FFFFFF;fill-opacity:0.3;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="54.0664" x2="18" y2="-16.6725" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#626364"/>\n\t<stop  offset="1" style="stop-color:#414447"/>\n</linearGradient>\n<path class="st0 sq-focus-card-bg" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<path class="st1" d="M7,12h22c0.6,0,1,0.4,1,1l0,0c0,0.6-0.4,1-1,1H7c-0.6,0-1-0.4-1-1l0,0C6,12.4,6.4,12,7,12z"/>\n<path class="st1" d="M6.5,17h6c0.3,0,0.5,0.2,0.5,0.5l0,0c0,0.3-0.2,0.5-0.5,0.5h-6C6.2,18,6,17.8,6,17.5l0,0C6,17.2,6.2,17,6.5,17z\n\t"/>\n</svg>\n'},masterCard:{back:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.backst0{fill:url(#SVGID_1_);}\n\t.backst1{fill:#343434;}\n\t.backst2{opacity:0.1;}\n\t.backst3{opacity:0.5;fill:#FFFFFF;enable-background:new    ;}\n\t.backst4{fill:#FFFFFF;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="26" x2="18" y2="2" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#DEDEDE"/>\n\t<stop  offset="1" style="stop-color:#D5D6D6"/>\n</linearGradient>\n<path class="backst0" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<rect y="4" class="backst1" width="36" height="5"/>\n<circle id="shadow" class="backst2" cx="24" cy="12.5" r="8.5"/>\n<rect x="4" y="11" class="backst3" width="24" height="3"/>\n<path class="backst4" d="M24,20c4.4,0,8-3.6,8-8c0-4.4-3.6-8-8-8s-8,3.6-8,8C16,16.4,19.6,20,24,20z"/>\n<path class="backst1" d="M27,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S26.4,13,27,13z"/>\n<path class="backst1" d="M24,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S23.4,13,24,13z"/>\n<path class="backst1" d="M21,13c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S20.4,13,21,13z"/>\n</svg>\n',front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#FF5F00;}\n\t.st2{fill:#EB001B;}\n\t.st3{fill:#F79E1B;}\n</style>\n<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="18" y1="26" x2="18" y2="2" gradientTransform="matrix(1 0 0 -1 0 26)">\n\t<stop  offset="0" style="stop-color:#DEDEDE"/>\n\t<stop  offset="1" style="stop-color:#D5D6D6"/>\n</linearGradient>\n<path class="st0" d="M4,0h28c2.2,0,4,1.8,4,4v16c0,2.2-1.8,4-4,4H4c-2.2,0-4-1.8-4-4V4C0,1.8,1.8,0,4,0z"/>\n<path class="st1" d="M15.2,16.9h6.2V7h-6.2V16.9z"/>\n<path class="st2" d="M15.6,12c0-1.9,0.9-3.8,2.4-5C15.3,4.8,11.4,5.3,9.3,8c-2.1,2.8-1.6,6.8,1,8.9c2.2,1.8,5.4,1.8,7.6,0\n\tC16.5,15.7,15.6,13.9,15.6,12"/>\n<path class="st3" d="M28,12c0,3.5-2.8,6.4-6.2,6.4c-1.4,0-2.7-0.5-3.8-1.4c2.7-2.2,3.1-6.2,1-8.9c-0.3-0.4-0.7-0.8-1-1.1\n\tc2.7-2.2,6.6-1.7,8.7,1.1C27.5,9.1,28,10.5,28,12L28,12z"/>\n</svg>\n'},squareGiftCardV2:{back:Fa,front:Fa},unionPay:{back:Ba,front:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 36 24" style="enable-background:new 0 0 36 24;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:#EAEAEA;}\n\t.st2{fill:#E21837;}\n\t.st3{fill:#00457C;}\n\t.st4{fill:#007B84;}\n</style>\n<g>\n\n\t\t<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="24" x2="1" y2="24" gradientTransform="matrix(5.109625e-15 83.4465 -83.4465 5.109625e-15 2020.7161 -19.2133)">\n\t\t<stop  offset="0" style="stop-color:#FFFFFF"/>\n\t\t<stop  offset="1" style="stop-color:#EAEAEA"/>\n\t</linearGradient>\n\t<path class="st0" d="M32.2,0.5H3.8C2,0.5,0.5,2,0.5,3.8v16.5c0,1.8,1.5,3.2,3.2,3.2h28.5c1.8,0,3.2-1.5,3.2-3.2V3.8\n\t\tC35.5,2,34,0.5,32.2,0.5z"/>\n\t<path class="st1" d="M32.2,0H3.8C1.7,0,0,1.7,0,3.8v16.5C0,22.3,1.7,24,3.8,24h28.5c2.1,0,3.8-1.7,3.8-3.8V3.8\n\t\tC36,1.7,34.3,0,32.2,0z M35.5,20.2c0,1.8-1.5,3.2-3.2,3.2H3.8c-1.8,0-3.2-1.5-3.2-3.2V3.8C0.5,2,2,0.5,3.8,0.5h28.5\n\t\tc1.8,0,3.2,1.5,3.2,3.2V20.2z"/>\n</g>\n<path class="st2" d="M13.3,7h4.2c0.6,0,1,0.5,0.8,1l-2,8c-0.1,0.6-0.7,1-1.3,1h-4.2c-0.6,0-1-0.5-0.8-1l2-8C12.1,7.5,12.7,7,13.3,7"\n\t/>\n<path class="st3" d="M17.2,7h4.9c0.6,0,0.3,0.5,0.2,1l-2,8c-0.1,0.6-0.1,1-0.7,1h-4.9c-0.6,0-1-0.5-0.8-1l2-8C16,7.5,16.6,7,17.2,7"\n\t/>\n<path class="st4" d="M21.9,7h4.2c0.6,0,1,0.5,0.8,1l-2,8c-0.1,0.6-0.7,1-1.3,1h-4.2c-0.6,0-1-0.5-0.8-1l2-8C20.7,7.5,21.3,7,21.9,7"\n\t/>\n</svg>\n'},unknown:{back:Ga,front:Va},visa:{back:'<svg width="36" height="24" viewBox="0 0 36 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="36" height="24" rx="4" fill="#1A1F71"/>\n<rect y="4" width="36" height="5" fill="#343434"/>\n<rect opacity="0.303627" x="4" y="11" width="24" height="3" fill="white"/>\n<g opacity="0.95" filter="url(#filter0_d)">\n<path d="M24 19C27.866 19 31 15.866 31 12C31 8.13401 27.866 5 24 5C20.134 5 17 8.13401 17 12C17 15.866 20.134 19 24 19Z" fill="white"/>\n</g>\n<path d="M27 13C27.5523 13 28 12.5523 28 12C28 11.4477 27.5523 11 27 11C26.4477 11 26 11.4477 26 12C26 12.5523 26.4477 13 27 13Z" fill="#343434"/>\n<path d="M24 13C24.5523 13 25 12.5523 25 12C25 11.4477 24.5523 11 24 11C23.4477 11 23 11.4477 23 12C23 12.5523 23.4477 13 24 13Z" fill="#343434"/>\n<path d="M21 13C21.5523 13 22 12.5523 22 12C22 11.4477 21.5523 11 21 11C20.4477 11 20 11.4477 20 12C20 12.5523 20.4477 13 21 13Z" fill="#343434"/>\n<defs>\n<filter id="filter0_d" x="16" y="5" width="16" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n<feOffset dy="1"/>\n<feGaussianBlur stdDeviation="0.5"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n</filter>\n</defs>\n</svg>\n',front:'<svg width="36" height="24" viewBox="0 0 36 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="36" height="24" rx="4" fill="#1A1F71"/>\n<path d="M14.267 8.12632L10.7282 16.253H8.41262L6.66505 9.7685C6.57767 9.38954 6.4466 9.22111 6.14078 9.05268C5.61651 8.80003 4.74272 8.50529 4 8.37896L4.04369 8.12632H7.75728C8.23786 8.12632 8.67476 8.42107 8.76214 8.96846L9.67961 13.6845L11.9515 8.16843H14.267V8.12632ZM23.3107 13.6002C23.3107 11.4528 20.2524 11.3265 20.2524 10.4001C20.2524 10.1054 20.5583 9.8106 21.1699 9.72639C21.4757 9.68428 22.3495 9.64218 23.3107 10.1054L23.7039 8.37896C23.1796 8.21054 22.5243 8 21.6505 8C19.5097 8 17.9806 9.09478 17.9806 10.6949C17.9806 11.8739 19.0728 12.5055 19.9029 12.8844C20.733 13.2634 21.0388 13.516 21.0388 13.895C21.0388 14.4424 20.3835 14.695 19.7282 14.695C18.6359 14.695 17.9806 14.4003 17.5 14.1897L17.1068 15.9582C17.6311 16.1688 18.5485 16.3793 19.5097 16.3793C21.7816 16.3793 23.267 15.2845 23.3107 13.6002ZM28.9903 16.253H31L29.2524 8.12632H27.3738C26.9369 8.12632 26.5874 8.37897 26.4563 8.71582L23.1796 16.253H25.4515L25.8883 15.0319H28.6845L28.9903 16.253ZM26.5437 13.3897L27.6796 10.358L28.335 13.3897H26.5437ZM17.3689 8.12632L15.5777 16.253H13.3932L15.1845 8.12632H17.3689Z" fill="white"/>\n</svg>\n'}},za=function(e){return ja[e]||ja.unknown};(Ha||(Ha={})).THIRD_PARTY_GIFT_CARD="thirdPartyGiftCard";class qa{constructor(e){this.options=e}format(e){for(var t=e.split(""),n="",r=0;t.length>0;)n+=this.options.delimiterPositions.includes(r)?this.options.delimiter:t.shift(),r+=1;return n}}class Ya{constructor(e){this.options=e}format(e){var t=e;return void 0!==this.options.regexp&&void 0!==this.options.replacement&&(this.options.replacement,t=e.replace(this.options.regexp,this.options.replacement)),t.slice(0,this.options.maxLength)}}class Ka{getName(){return"LuhnValdator"}isValid(e){var t=String(e).replace(/\D/g,"");if(!t)return!1;for(var n=0,r=!1,i=t.length-1;i>=0;i--){var o=Number.parseInt(t.charAt(i),10);n+=r?Ka.luhnDigits[o]:o,r=!r}return n%10==0}}Ka.luhnDigits=[0,2,4,6,8,1,3,5,7,9];var Wa=new RegExp(/\D/g);new Ya({maxLength:15,regexp:Wa,replacement:""}),new Ya({maxLength:19,regexp:Wa,replacement:""}),new Ya({maxLength:14,regexp:Wa,replacement:""}),new Ya({maxLength:16,regexp:Wa,replacement:""}),new Ya({maxLength:16,regexp:Wa,replacement:""}),new Ya({maxLength:16,regexp:Wa,replacement:""}),new Ya({maxLength:16,regexp:Wa,replacement:""}),new Ya({maxLength:19,regexp:Wa,replacement:""}),new Ya({maxLength:16,regexp:Wa,replacement:""}),new Ya({maxLength:255,regexp:new RegExp(/[^\dA-Za-z]/g),replacement:""}),new qa({delimiter:" ",delimiterPositions:[4,11]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,11]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),new qa({delimiter:" ",delimiterPositions:[4,9,14]}),_.GET_PRODUCT_INFORMATION_ENDPOINT;var Za="sq-focus",Qa="sq-error",Ja=".".concat(Za),Xa=".".concat(Qa),$a="::placeholder";new Jr("IFrame does not exist");var es=["top","right","bottom","left"],ts=/^\d+\/\d+$/,ns=/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,rs=/^-\d*\.?\d+em$/,is=/^-\d*\.?\d+pt$/,os=/^-\d*\.?\d+px$/,as=/^\d*\.?\d+em$/,ss=/^\d*\.?\d+%$/,cs=/^\d*\.?\d+pt$/,ls=/^\d*\.?\d+px$/,us=/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,ds=/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,ps=/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/,hs=/\s(?![^(]*\))/,fs=new Set(["screen","all","print","speech"]),vs=new Set(["and"]),gs=new Set(["not","only"]),ms=new Set(["portrait","landscape"]),ys=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Es=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),_s=new Set([100,200,300,400,500,600,700,800,900]),Ss=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Cs=new Set(["normal"]),Is=new Set(["smaller","larger"]),As=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","tahoma","times","times new roman","trebuchet ms","verdana"]),ws=new Set(["none","antialiased","subpixel-antialiased"]),Os=new Set(["grayscale","auto"]),Ps=new Set(["none"]);function Ts(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),n=0;if("inset"===t[0]&&(t.shift(),n++),"inset"===t[t.length-1]){if(n>0)return!1;t.pop()}for(var r=0;r<2;r++){var i=t.shift();if(void 0===i||!xs(i))return!1}switch(t.length){case 0:return!0;case 1:return Us(t[0])||Ms(t[0]);case 2:return Ms(t[0])&&(Us(t[1])||ks(t[1]));case 3:return Ms(t[0])&&ks(t[1])&&Us(t[2]);default:return!1}}(e)))}function bs(e){return["border-box","content-box"].includes(e)}function Rs(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||Zs(e)||Xs(e)}(e)))}function Ns(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(Ls)}function Ls(e){return 0===Number(e)||Zs(e)||Xs(e)}function Ds(e){return 0===Number(e)||Zs(e)||Xs(e)||Qs(e)||$s(e)}function xs(e){return 0===Number(e)||Ws(e)||Js(e)}function ks(e){return 0===Number(e)||Ws(e)||Js(e)}function Ms(e){return 0===Number(e)||Zs(e)||Xs(e)}function Us(e){return null!=e&&(function(e){return Es.has(e.toLowerCase())}(e)||function(e){return ns.test(e)}(e)||function(e){return ds.test(e)}(e)||function(e){return ps.test(e)}(e))}function Hs(e){return null!=e&&(function(e){return ys.has(e.toLowerCase())}(e)||function(e){return Is.has(e.toLowerCase())}(e)||Zs(e)||ec(e)||Xs(e)||tc(e))}function Fs(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),As.has(t);var t}))}function Gs(e){var t=Number(e);return Number.isNaN(t)?Ss.has(e.toLowerCase()):_s.has(t)}function Vs(e){return"normal"===e||Js(e)||function(e){return ec(e)||function(e){return is.test(e)}(e)}(e)||Ws(e)}function Bs(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Cs.has(e)||Xs(e)||Zs(e)||ec(e)||tc(e)}function js(e){return ws.has(e)}function zs(e){return Os.has(e)}function qs(e){return Ps.has(e)}function Ys(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return Zs(e)||Xs(e)||tc(e)||0===Number(e)}(e)))}function Ks(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[n,r]=t.split(/: */);switch(n){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return Zs(r)||Xs(r)||tc(r);case"resolution":case"min-resolution":case"max-resolution":return function(e){return us.test(e)}(r);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return ts.test(e)}(r);case"color":case"color-index":case"monochrome":return void 0===r;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(r);case"orientation":return function(e){return ms.has(e)}(r);default:return!1}}function Ws(e){return Zs(e)||Qs(e)}function Zs(e){return ls.test(e)}function Qs(e){return os.test(e)}function Js(e){return Xs(e)||$s(e)}function Xs(e){return as.test(e)}function $s(e){return rs.test(e)}function ec(e){return cs.test(e)}function tc(e){return ss.test(e)}var nc=function(e,t){var n=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Us;case"-webkit-box-shadow":case"box-shadow":return Ts;case"box-sizing":return bs;case"font-family":return Fs;case"font-size":return Hs;case"font-weight":return Gs;case"letter-spacing":return Vs;case"line-height":return Bs;case"padding":return Ys;case"-webkit-font-smoothing":return js;case"-moz-osx-font-smoothing":return zs;case"display":return qs;case"border-radius":return Rs;case"border-width":return Ns;case"top":case"bottom":case"left":case"right":return Ds;case"width":return function(e){return e};default:return}})(e);return n&&n(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},rc=function(e){return!!(t=e).startsWith("@media")&&t.slice("@media".length+1,t.length).split(/, */).every((e=>{var t=e.split(hs);if(0===t.length)return!1;var n=0;if(!t[0].startsWith("(")){var r=0;if(gs.has(t[0])&&(r=1),t.length===r+1)return fs.has(t[r]);if(!fs.has(t[r])||!vs.has(t[r+1]))return!1;n=2+r}if((t.length-n)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(n)))if(!(Number(i)%2==0?Ks(o):vs.has(o)))return!1;return!0}));var t};function ic(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n.length>0){var i=n.includes(e);if(!i)throw new yr(e)}var o=Pn(e),a=nc(o,t);if(0===a.length)throw new Er(e,t);return r&&(a+=" !important"),Tn(o,a)}function oc(e,t,n){var r=[],i=[],o=new Set(e.excludeProperties||[]);for(var[a,s]of Object.entries(t))if(!o.has(a)){var c=s||"";try{r.push(ic(a,c,n))}catch(e){i.push(e)}}if(i.length>0)throw new Sr(i);return e.toSelectors.reduce((function(e,t){return Object.assign({},e,{[t]:r})}),{})}function ac(e,t,n){var r={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:a,toProperty:s,toSelectors:c,transformPropertyValue:l}=e,u=t[o];if(u){var d=l?l(u):u;try{var p=ic(s||o,d,s?[...n,s]:n,a);c.forEach((e=>{r[e]||(r[e]=[]),r[e].push(p)}))}catch(e){i.push(e)}}})),i.length>0)throw new Sr(i);return r}function sc(e){var t=[];for(var[n,r]of Object.entries(e))r&&r.length>0&&t.push("\n      ".concat(n," { ").concat(r.join(" ")," }\n      "));return t.join("")}function cc(e,t){return!t&&rc(e)}var lc=function(e,t){var n=t.split(" ");switch(n.length){case 1:return n[0];case 2:switch(e){case"top":case"bottom":return n[0];default:return n[1]}case 3:switch(e){case"top":return n[0];case"bottom":return n[2];default:return n[1]}case 4:switch(e){case"top":return n[0];case"right":return n[1];case"bottom":return n[2];case"left":return n[3];default:return""}default:return""}},uc=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],a=[...Object.keys(n.selectorMappings),...Object.keys(n.selectorPropertyMappings||{})],s=new Set(a),c=new Set(Object.values(r));Object.keys(t).forEach((e=>{c.has(e)||cc(e,i)||o.push(new _r(e))}));var l={};function u(e){for(var[t,n]of Object.entries(e))l[t]||(l[t]=[]),l[t].push(...n)}for(var d of[...s]){var p,h=t[d],f=n.allowedAttributes[d]||[],v=n.selectorMappings[d]||[],g=(null==n||null===(p=n.selectorPropertyMappings)||void 0===p?void 0:p[d])||[];if(h){try{var m=oc(v,h,f);u(m)}catch(e){e instanceof Sr&&o.push(...e.errors)}try{var y=ac(g,h,f);u(y)}catch(e){e instanceof Sr&&o.push(...e.errors)}}}var E=Object.keys(t).filter((e=>!s.has(e)&&rc(e)));if(E.forEach((i=>{try{var a=e(t[i],n,r,!0);l[i]=[a]}catch(e){o.push(...e.errors)}})),o.length>0)throw new Sr(o);return sc(l)},dc="sq-card-iframe-container",pc="sq-card-wrapper",hc="sq-card-component",fc="sq-card-message",vc="sq-card-message-error",gc="sq-card-message-no-error",mc="sq-visible",yc=".".concat(pc),Ec=".".concat(hc),_c=".".concat(dc),Sc="".concat(yc).concat(Ja),Cc="".concat(yc).concat(Xa),Ic="".concat(yc," ").concat(Ec),Ac="".concat(yc," ").concat(_c),wc="".concat(Sc," ").concat(_c),Oc="".concat(Cc," ").concat(_c),Pc="input",Tc="form",bc="label",Rc=".sq-background-text",Nc=".sq-visible-background-text",Lc=".sq-card-message-error::before",Dc=".sq-card-message-no-error::before",xc="".concat(_c).concat("::before"),kc="".concat(Tc).concat(Ja),Mc="".concat(Tc).concat(Xa),Uc=("".concat(kc," ").concat(Pc),"".concat(Pc).concat(Xa),"".concat(kc," ").concat(Pc).concat($a),"".concat(Mc," ").concat(Pc).concat(Xa).concat($a),"".concat(Tc," ").concat(Pc).concat($a),"".concat(Tc," ").concat(Rc)),Hc=("".concat(Uc," ").concat(Nc),"".concat(kc," ").concat(bc),"".concat(Mc," ").concat(Pc).concat(Xa," ~ ").concat(bc),"".concat(kc," ").concat(Rc," ").concat(Nc),"".concat(Mc," ").concat(Pc).concat(Xa," ~ ").concat(Rc," ").concat(Nc),"".concat(Tc," ").concat("#card-number-wrapper"),["borderWidth"]);function Fc(e){var t=["".concat(e).concat(Xa," ").concat(xc),"".concat(e).concat(Ja," ").concat(xc)];return es.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(n=e,function(e){var t=lc(n,e);return"0"===t[0]?t:"-".concat(t)})};var n}))}function Gc(e,t){return uc(e,function(e){var t="#".concat(e);return{allowedAttributes:{[kn.CARD_COMPONENT]:Ur,[kn.CARD_COMPONENT_FOCUS]:Hr,[kn.CARD_COMPONENT_ERROR]:Hr,[kn.CARD_INPUT_HELPER_TEXT]:Fr,[kn.CARD_INPUT_HELPER_ICON]:Gr,[kn.CARD_INPUT_ERROR_TEXT]:Fr,[kn.CARD_INPUT_ERROR_ICON]:Gr},selectorMappings:{[kn.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Ac)]},[kn.CARD_COMPONENT_FOCUS]:{excludeProperties:Hc,toSelectors:["".concat(t).concat(wc)]},[kn.CARD_COMPONENT_ERROR]:{excludeProperties:Hc,toSelectors:["".concat(t).concat(Oc)]},[kn.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-no-error")]},[kn.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Dc)]},[kn.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-error")]},[kn.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Lc)]}},selectorPropertyMappings:{[kn.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Ac)]}],[kn.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(xc),"".concat(t).concat(Ic)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Ac)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var n=lc(t,e);return"0"===n&&(n="0px"),n})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Fc(t)],[kn.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(Xa," ").concat(xc)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Xa," ").concat(xc)]}],[kn.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(Ja," ").concat(xc)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Ja," ").concat(xc)]}],[kn.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Lc)]}],[kn.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Dc)]}]}}}(t),kn)}kn.CARD_INPUT,kn.CARD_INPUT_FOCUS,kn.CARD_INPUT_ERROR,kn.CARD_INPUT_PLACEHOLDER,kn.CARD_INPUT_FOCUS_PLACEHOLDER,kn.CARD_INPUT_ERROR_PLACEHOLDER,kn.CARD_INPUT,kn.CARD_INPUT_FOCUS,kn.CARD_INPUT_ERROR,kn.CARD_INPUT_FOCUS_PLACEHOLDER,kn.CARD_INPUT_ERROR_PLACEHOLDER,kn.CARD_INPUT_PLACEHOLDER,kn.CARD_COMPONENT,kn.CARD_INPUT,kn.CARD_INPUT_PLACEHOLDER,kn.CARD_INPUT_FOCUS_PLACEHOLDER,kn.CARD_INPUT_ERROR_PLACEHOLDER;var Vc="background-text";"sq-".concat(Vc),"sq-hidden-".concat(Vc),"sq-visible-".concat(Vc),xn.CARD_NUMBER,"0".repeat(24),xn.EXPIRATION_DATE,"0".repeat(4),xn.CVV,"0".repeat(4),xn.POSTAL_CODE;var Bc,jc=[yr,Er,_r,Sr,ur,Ar],zc=[dr,_r,yr,Er,Sr];!function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides"}(Bc||(Bc={}));class qc{constructor(e){var{applePayMerchantIdentifier:t,applicationId:n,avt:r,hostname:i,locationId:o,instanceId:a,sessionId:s,sourceUrl:c,locale:l}=e;this.applicationId=n,this.locationId=o,this._sessionId=s,this.instanceId=a,this.applePayMerchantIdentifier=t,this.hostname=i,this.sourceUrl=c,this._locale=l,this.avt=r}setSessionId(e){this.setAttribute(Bc.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Bc.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Bc.LOCALE,e)}get sessionId(){return this._sessionId}setAnalyticsToken(e){this.setAttribute(Bc.ANALYTICS_TOKEN,e)}get analyticsToken(){return this._analyticsToken}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides)),this.serialized}setAttribute(e,t){if(this.isValueString(t))this[e]=t;else switch(e){case Bc.TRANSLATION_OVERRIDES:this[e]=t}this.serialized=void 0}isValueString(e){return"string"==typeof e}}_.CARD_NONCE_ENDPOINT;var Yc,Kc=[Ir,dr],Wc=function(e,t){var n=document.createElement("iframe");return new Promise(((r,i)=>{n.onerror=e=>{i(e)},n.onload=()=>{r(n)},Object.entries(e).forEach((e=>{var[t,r]=e;n.setAttribute(t,r)})),t?t.appendChild(n):document.body.appendChild(n)}))},Zc=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus"}(Yc||(Yc={}));var Qc=new Set(["DIV","SPAN"]),Jc=new Set(["DIV","SPAN","BUTTON"]);function Xc(e,t){var n;if(function(e){return"string"==typeof e}(e)){var r=document.querySelector(e);if(!r)throw new Jn(e);n=r}else{if(!(e instanceof HTMLElement))throw new hr(e,t);if(n=e,!document.contains(n))throw new Jn(n)}if(!t.has(n.nodeName))throw new hr(n,t);return n}function $c(e){return Xc(e,Qc)}class el{constructor(e){this.id=ea(),this.context=e}request(e,t){var n={featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession()};return this.context.messenger.request(e,{options:n,payload:t})}initializeMessageBus(e){var t=this,n=function(e,n){t.context.messenger.onMessage({listener(e){n(e)},messageType:"".concat(e,":").concat(t.id)})};for(var[r,i]of Object.entries(e))n(r,i)}}var tl={addStyleElement:function(e,t,n,r){if(tl.hasExistingStyleElement(t))n&&n();else{var i=document.createElement("link");n&&(i.onload=n),r&&(i.onerror=t=>{r(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))}),i.href=e,i.rel="stylesheet",i.type="text/css",i.id=t,document.head.appendChild(i)}},hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}},nl=tl;function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function al(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){al(o,r,i,a,s,"next",e)}function s(e){al(o,r,i,a,s,"throw",e)}a(void 0)}))}}var cl="emptyMessage",ll=[xn.CARD_NUMBER,xn.EXPIRATION_DATE,xn.CVV,xn.POSTAL_CODE];function ul(e){return"".concat("single-card-wrapper","-").concat(e)}function dl(e,t){var n=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=Gc(e,ul(t))}var pl=class extends ga{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.postalCountry=Vi.US,this.attached=!1,this.id=ea(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new el(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return sl((function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{};t.validateOptions(n),t.metricsHandler.logEvent(si.ConfigUpdated,n),void 0!==n.includeInputLabels&&(t.inputLabelsIncluded=Boolean(n.includeInputLabels),t.onResize()),void 0!==n.style&&dl(n.style,t.id);try{return yield t.paymentMessenger.request(Yc.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:n.postalCode,style:n.style,type:Gn.CARD}),Promise.resolve()}catch(e){if(Rn(e,zc))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new Ar("configuring the Card Element")}}))()}destroy(){var e=this;return sl((function*(){e.context.removeLocaleChangedListener(e.updateCardDetailText),e.metricsHandler.logEvent(si.Destroyed);var t=yield e.paymentMessenger.request(Yc.DESTROY);return e.element&&(Zc(e.element),window.removeEventListener("resize",e.onResize.bind(e))),e.attached=!1,t}))()}attach(e){var t=this;return sl((function*(){if(t.attached)throw new ur(Gn.CARD);var n;t.attached=!0,t.metricsHandler.logEvent(oi.AttachStart),t.metricsHandler.logEvent(si.Configured,t.initialOptions);try{n=$c(e)}catch(e){throw t.metricsHandler.logEvent(oi.AttachError),e}try{return yield t.buildCardElement(n),yield t.paymentMessenger.request(Yc.LOAD_CARDS_FORM,{configuration:il(il({},t.initialOptions),{},{type:Gn.CARD}),iframeName:t.iframeName}),yield t.stylesLoadedPromise,t.element=n,window.addEventListener("resize",t.onResize.bind(t)),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(oi.AttachOK),Promise.resolve()}catch(e){if(t.attached=!1,t.metricsHandler.logEvent(oi.AttachError),Rn(e,jc))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new Ar("attaching the Card Element")}}))()}focus(e){var t=this;return sl((function*(){if(!Object.values(xn).includes(e))throw new or(e);t.metricsHandler.logEvent(si.Focused,e);try{return yield t.paymentMessenger.request(Yc.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}addEventListener(e,t){this.metricsHandler.logEvent(si.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}tokenize(){var e=this;return sl((function*(){if(e.tokenizeInProcess)throw new Ir([Ea]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(Yc.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:Gn.CARD});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),e.context.setSessionId(t.sessionId),function(e){var{card:t,cardNonce:n}=e;return{details:{card:t,method:Gn.CARD},status:Bn.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Vr)return{errors:t.errors,status:Bn.INVALID};throw Rn(t,Kc)?t:(e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId),Br())}}))()}recalculateSize(){if(!this.attached)throw new dr(Gn.CARD);this.metricsHandler.logEvent(si.RecalculatedSize),this.onResize()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[n,r]=e;if(void 0===t[n])throw new ar(n);if(t[n]&&!t[n](r))throw new sr(n,r)}))}buildErrorMessage(e){switch(e){case xn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case xn.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case xn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case xn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];case cl:default:return""}}buildHelperMessage(e){switch(e){case xn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case xn.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case xn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case xn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];case cl:default:return""}}updateCardDetailText(){var e,t,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(n=this.focusedInput)&&void 0!==n?n:cl,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(vc),this.cardDetail.classList.add(gc)):(e=ll.find((e=>this.errorList.has(e)))||cl,t=this.buildErrorMessage(e),this.cardDetail.classList.add(vc),this.cardDetail.classList.remove(gc)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(mc):this.cardDetail.classList.remove(mc))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Za)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Qa))}handleInputEvent(e){var t,n,{data:r}=e,i=r.payload;switch(i.eventType){case Dn.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(Qa);break;case Dn.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case Dn.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Za);break;case Dn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),n={[wa.SET_POSTAL_COUNTRY]:t,[wa.FOCUS_CLASS_ADDED]:e,[wa.FOCUS_CLASS_REMOVED]:e,[wa.ERROR_CLASS_ADDED]:e,[wa.ERROR_CLASS_REMOVED]:e,[wa.CARD_BRAND_CHANGED]:e,[wa.POSTAL_CODE_CHANGED]:e,[wa.SUBMIT]:e,[wa.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(n)}buildCardIframe(e){return Wc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:_.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return sl((function*(){var n;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=ul(t.id),t.wrapperElement.classList.add(pc),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(fc),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(dc),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(hc),t.wrapperElement.appendChild(t.cardDetail),nl.addStyleElement(_.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(n=t.initialOptions)&&void 0!==n&&n.style&&dl(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}};function hl(e){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(e),type:"UNKNOWN"}}var fl,vl=function(e){window.localStorage&&window.localStorage.removeItem(e)},gl=function(e){if(window.localStorage){var t,n=window.localStorage.getItem(e);if(!n)return null;try{t=JSON.parse(n)}catch(e){return null}return{key:e,value:t}}return null},ml=function(e){window.localStorage&&window.localStorage.setItem(e.key,JSON.stringify(e.value))};!function(e){e.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",e.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(fl||(fl={}));var yl=["state","code","access_token"],El={CASH_APP_OAUTH_PARAMS:yl,extractCashAppParamsFromURI:function(e,t){var n=new URL(e),r=0,i=[];yl.forEach((e=>{n.searchParams.get(e)&&(r++,i.push(e),n.searchParams.delete(e))}));var o=n.searchParams.get("error");return o&&n.searchParams.delete("error"),!o&&r>0&&r!==yl.length&&t.captureException(new Jr("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(yl.toString(),"]"))),n.toString()},findAndRemoveQueryParams:function(e,t){var n={};if(!window.URLSearchParams)return n;var r=new URLSearchParams(e),i=t.length,o=0;if(t.forEach((e=>{n[e]=r.get(e),n[e]&&o++})),i===o){var a=new URLSearchParams(e);t.forEach((e=>{a.delete(e)}));var s="?".concat(a.toString()),c=g.windowHash;c&&(s+="".concat(c)),g.replaceWindowState(s)}return n}};class _l extends nn{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,_l.prototype)}}function Sl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Cl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Sl(o,r,i,a,s,"next",e)}function s(e){Sl(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Il{constructor(){this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),nl.addStyleElement(_.CASH_APP_STYLES,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var t=this;return Cl((function*(){yield t.stylesLoadedPromise;var n,r=document.createElement("button"),i=document.createElement("img");return i.setAttribute("src",(n=e.theme===Dr.DARK?"fff":"000","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(n,"'/%3E%3C/svg%3E"))),r.classList.add("sq-cash-button",function(e){switch(e){case xr.ROUNDED:return"sq-cash-button-rounded";case xr.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),function(e){switch(e){case Dr.DARK:return"sq-cash-button-dark";default:return"sq-cash-button-light"}}(e.theme)),r.appendChild(i),r}))()}createQrCodeContainer(e){var t=this;return Cl((function*(){if(yield t.stylesLoadedPromise,!Nn(e))throw new _l;var n=new URL(e);n.searchParams.set("rounded","0");var r=document.createElement("div");r.classList.add("sq-cash-qr-container");var i=document.createElement("div");i.classList.add("col-left");var o=document.createElement("div");o.classList.add("col-right");var a=document.createElement("div");a.classList.add("sq-cash-qr-instruction"),a.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var s=document.createElement("div"),c=document.createElement("img");s.classList.add("sq-cash-qr-guide"),c.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),s.appendChild(c),i.appendChild(a),i.appendChild(s);var l=document.createElement("img");return l.classList.add("sq-cash-qr-code"),l.setAttribute("src",n.toString()),o.appendChild(l),r.appendChild(i),r.appendChild(o),r}))()}}function Al(e,t,n){return{details:{cashApp:{cashtag:e,transactionId:t},method:Gn.CASH_APP},status:Bn.OK,token:n}}function wl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ol(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){wl(o,r,i,a,s,"next",e)}function s(e){wl(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Pl="sq-cash-app-redirect-payment-method-tracking-id";class Tl extends ga{constructor(e,t){if(super(e),this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=g.isAndroid()||g.isIOS(),this.wasFirstInteractionCalled=!1,this.cashAppClient=new Il,!this.session.locationId)throw new tr("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,xa(t),t.transactionId.length>50)throw new tr("transactionId too long. Should be less than ".concat(50," characters."));var n=El.extractCashAppParamsFromURI(t.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,n,t.transactionId,t.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(si.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve()}attachAll(e,t){var n=this;return Ol((function*(){n.metricsHandler.logEvent(oi.AttachStart);try{if(e.button){var r=yield n.cashAppClient.createCashAppButton(Object.assign({shape:xr.ROUNDED,theme:Dr.DARK},null==t?void 0:t.button));n.elements.button=n.validateAndQuerySelector(e.button),n.elements.button.appendChild(r)}return n.elements.qrCode=n.validateAndQuerySelector(e.qrCode),n.metricsHandler.logEvent(oi.AttachOK),Promise.resolve()}catch(e){throw n.metricsHandler.logEvent(oi.AttachError),e}}))()}tokenize(){var e=this;return Ol((function*(){e.handleFirstInteraction();var{qrCode:t}=e.elements;if(!t)throw new dr(Gn.CASH_APP);try{var n,r=yield wi.timeout((()=>e.fetchAuthURLsPromise),In.minutesToMs(1),new Jr("Precondition failed",Gn.CASH_APP));if(r.error)throw r.error;if(!e.transactionId)throw new Jr("expected transactionId to exist at tokenization",Gn.CASH_APP);if(e.willRedirect){var i={key:Pl,value:{paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId}};return ml(i),g.redirectTo(r.redirectURL),new Promise((()=>{}))}var o=yield e.cashAppClient.createQrCodeContainer(r.qrURL);t.appendChild(o);var{token:a,cashtag:s,paymentMethodTrackingId:c,sessionId:l}=yield e.messenger.request(fl.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{options:{paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),session:e.session},payload:{expiresAt:Date.now()+In.secondsToMs(r.expiresIn),requestBody:{analytics_token:null!==(n=e.session.analyticsToken)&&void 0!==n?n:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:_.VERSION,website_url:e.session.sourceUrl}}});return e.context.setSessionId(l),e.context.setPaymentMethodTrackingId(c),Al(s,e.transactionId,a)}catch(t){return t instanceof _l&&e.errorLogger.captureException(t),ka(t,e.errorLogger)}}))()}getRedirectResult(){var e=this;return Ol((function*(){var t,{error:n}=El.findAndRemoveQueryParams(window.location.search,["error"]);if(n){var r=new Ir([hl(n)]);return e.errorLogger.captureException(r),ka(r,e.errorLogger)}var i,o,a,s,{state:c,code:l,access_token:u}=El.findAndRemoveQueryParams(window.location.search,El.CASH_APP_OAUTH_PARAMS);if(!c||!l||!u)return null;try{var d=function(e){var t=e.split(":");if(t.length<3)throw new Jr("Invalid transaction ID: could not separate");return t}(o=function(e){var{transaction_id:t}=JSON.parse(e);if(void 0===t)throw new Jr("Malformed state in redirect query params: ".concat(e));return t}(c));i=d[0],a=d[1]}catch(t){return ka(t,e.errorLogger)}var p=gl(Pl);null!==p&&o===(null===(t=p.value)||void 0===t?void 0:t.transactionId)&&(s=p.value.paymentMethodTrackingId),vl(Pl);var h=t=>{e.context.metricsHandler.metricsLogger.logEvent({event:t,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,i,s)};h(oi.NonceStart);try{var f=yield e.messenger.request(fl.REQUEST_CASH_APP_CUSTOMER,{options:{session:Object.assign({},e.session,{paymentMethodTrackingId:s,sessionId:i})},payload:u}),v=e.generateWalletToken(i,l,o,s);return h(oi.NonceOK),Al(f,a,v)}catch(t){return h(oi.NonceError),ka(t,e.errorLogger)}}))()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var t=document.querySelector(e);if(null===t)throw new Jn(e);return t}fetchAuthURLs(e,t,n,r){var i=this;this.fetchAuthURLsPromise=Ol((function*(){var o,a={expiresIn:-1,qrURL:"",redirectURL:""},s=1e3,c=i.willRedirect?t:void 0,l=r?{amount:r.amount,currency_code:r.currencyCode}:void 0,u={client_id:i.session.applicationId,location_id:e,redirect_uri:c,total_transaction_amount:l,transaction_id:n};try{var{expires_in:d,qr_url:p,redirect_url:h,transaction_id:f}=yield i.messenger.request(fl.REQUEST_CASH_APP_AUTH,{options:{paymentMethodTrackingId:i.context.getPaymentMethodTrackingId(),session:i.session},payload:u});i.transactionId=f,a.expiresIn=d,a.qrURL=p,a.redirectURL=h,o=d,s=Math.max(In.secondsToMs(o)-In.minutesToMs(1),In.minutesToMs(1)),i.willRedirect||(i.preloadedQRImage.src=p),a.expiresIn<2147483647?i.authTimeoutId=window.setTimeout((()=>{i.errorLogger.captureException(new Jr("Cash App Auth URLS expired unexpectedly with expiry of ".concat(s,"ms")),i.session.instanceId,i.session.sessionId)}),s):i.errorLogger.captureException(new Jr("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(a.expiresIn,"ms")),i.session.instanceId,i.session.sessionId)}catch(e){a.error=e}return a}))()}generateWalletToken(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:r,session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:t,transaction_id:n},websdk_version:_.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oi.FirstInteraction))}}Mn.GIFT_CARD_NUMBER,Mn.GIFT_CARD_NUMBER,"0".repeat(24);var bl,Rl=[yr,Er,_r,Sr,ur,Ar];function Nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(n),!0).forEach((function(t){Dl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xl(o,r,i,a,s,"next",e)}function s(e){xl(o,r,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus"}(bl||(bl={}));var Ml="emptyMessage",Ul=[Mn.GIFT_CARD_NUMBER];class Hl extends ga{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.attached=!1,this.id=ea(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new el(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return kl((function*(){if(t.attached)throw new ur(Gn.GIFT_CARD);var n;t.attached=!0,t.metricsHandler.logEvent(oi.AttachStart),t.metricsHandler.logEvent(si.Configured,t.initialOptions);try{n=$c(e)}catch(e){throw t.metricsHandler.logEvent(oi.AttachError),e}try{return yield t.buildCardElement(n),yield t.paymentMessenger.request(bl.LOAD_GIFT_CARDS_FORM,{configuration:Ll(Ll({},t.initialOptions),{},{type:Gn.GIFT_CARD}),iframeName:t.iframeName}),yield t.stylesLoadedPromise,t.element=n,window.addEventListener("resize",t.onResize.bind(t)),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(oi.AttachOK),Promise.resolve()}catch(e){if(t.attached=!1,t.metricsHandler.logEvent(oi.AttachError),Rn(e,Rl))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new Ar("attaching the Gift Card Element")}}))()}configure(e){var t=this;return kl((function*(){t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&Gl(e.style,t.id),t.metricsHandler.logEvent(si.ConfigUpdated,e);try{return void(yield t.paymentMessenger.request(bl.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:Gn.GIFT_CARD}))}catch(e){if(Rn(e,zc))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new Ar("configuring the Gift Card Element")}}))()}destroy(){var e=this;return kl((function*(){e.metricsHandler.logEvent(si.Destroyed);var t=yield e.paymentMessenger.request(bl.DESTROY);return e.element&&(Zc(e.element),window.removeEventListener("resize",e.onResize.bind(e))),e.attached=!1,t}))()}focus(e){var t=this;return kl((function*(){if(!Object.values(Mn).includes(e))throw new or(e);t.metricsHandler.logEvent(si.Focused,e);try{return yield t.paymentMessenger.request(bl.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}addEventListener(e,t){this.metricsHandler.logEvent(si.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}tokenize(){var e=this;return kl((function*(){if(e.tokenizeInProcess)throw new Ir([Ea]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(bl.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:Gn.GIFT_CARD});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),e.context.setSessionId(t.sessionId),function(e){var{card:t,cardNonce:n}=e;return{details:{giftCard:t,method:Gn.GIFT_CARD},status:Bn.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Vr)return{errors:t.errors,status:Bn.INVALID};throw Rn(t,Kc)?t:(e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId),Br())}}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[n,r]=e;if(void 0===t[n])throw new ar(n);if(t[n]&&!t[n](r))throw new sr(n,r)}))}buildCardElement(e){var t=this;return kl((function*(){var n;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Fl(t.id),t.wrapperElement.classList.add(pc),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(fc),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(dc),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(hc),t.wrapperElement.appendChild(t.cardDetail),nl.addStyleElement(_.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(n=t.initialOptions)&&void 0!==n&&n.style&&Gl(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return Wc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:_.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(n=this.focusedInput)&&void 0!==n?n:Ml,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(vc),this.cardDetail.classList.add(gc)):(e=Ul.find((e=>this.errorList.has(e)))||Ul[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(vc),this.cardDetail.classList.remove(gc)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(mc):this.cardDetail.classList.remove(mc))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var t,n,{data:r}=e,i=r.payload;switch(i.eventType){case Un.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(Qa);break;case Un.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case Un.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Za);break;case Un.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Za)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Qa))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[wa.FOCUS_CLASS_ADDED]:e,[wa.FOCUS_CLASS_REMOVED]:e,[wa.ERROR_CLASS_ADDED]:e,[wa.ERROR_CLASS_REMOVED]:e,[wa.CARD_BRAND_CHANGED]:e,[wa.SUBMIT]:e,[wa.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){switch(e){case Mn.GIFT_CARD_NUMBER:return this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError;case Ml:default:return""}}buildHelperMessage(e){switch(e){case Mn.GIFT_CARD_NUMBER:return this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber;case Ml:default:return""}}}function Fl(e){return"".concat("gift-card-wrapper","-").concat(e)}function Gl(e,t){var n=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=Gc(e,Fl(t))}class Vl extends nn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Vl.prototype)}}function Bl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}class jl extends Xo{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,n){var r,i=this;return(r=function*(){if(e in i.listeners)for(var r=new wr(e,t),o=[...i.listeners[e]],a=function*(t,i){var a=void 0;try{a=o[t](r)}catch(t){throw new er(e,t.message)}var s=void 0;if(a instanceof Promise)try{s=yield wi.timeout((()=>a),3e4,new Vl(e))}catch(t){if(t instanceof Vl)throw t;throw new er(e,t.message)}else s=a;n&&n(s)},s=0,c=o.length;s<c;s++)yield*a(s)},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Bl(o,n,i,a,s,"next",e)}function s(e){Bl(o,n,i,a,s,"throw",e)}a(void 0)}))})()}}function zl(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var n=[];return{isValid:Object.entries(t).map((r=>{var[i,o]=r;if("object"==typeof o){var{isValid:a,missingFields:s}=zl(e[i]||{},t[i]);return s.forEach((e=>{var[t,r]=e;n.push(["".concat(i,".").concat(t),r])})),a}return i in e&&typeof e[i]===o||(n.push([i,o]),!1)})).every((e=>e)),missingFields:n}}function ql(e,t,n){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var r=e.reduce(((e,r)=>{var i=zl({[t]:r},{[t]:n}),o=bn(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:r.isValid,missingFields:Object.entries(r.missingFieldsMap)}}var Yl,Kl={amount:"string",label:"string"},Wl={amount:"string",id:"string",label:"string"},Zl={amount:"string",label:"string"},Ql={};function Jl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Xl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Jl(o,r,i,a,s,"next",e)}function s(e){Jl(o,r,i,a,s,"throw",e)}a(void 0)}))}}function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tu{constructor(e,t,n,r){this.eventTarget=new jl,this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this.updateLock=n,this.metricsLogger=r}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var{isValid:t,missingFields:n}=ru(new tu(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(n),!0).forEach((function(t){eu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),this.localeStrings,this.updateLock,this.metricsLogger));if(!t)throw new Xn(n);return!this.updateLock.isLocked&&(e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.total&&(this._total=e.total),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),!0)}addEventListener(e,t){switch(this.metricsLogger.logEvent({event:si.EventListenerAdded,eventConfigurationValues:e,eventSource:pi.PaymentRequest}),e){case Vn.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case Vn.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;default:throw new Qo("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,n){return this.eventTarget.dispatchEvent(e,t,(e=>{var t=function(e){var{lineItems:t,shippingErrors:n,shippingOptions:r,error:i,total:o}=e;if(t){var a=ql(t,"lineItem",Kl);if(!a.isValid)return a}if(r){var s=ql(r,"shippingOption",Wl);if(!s.isValid)return s}if(o){var c=zl({total:o},{total:Zl});if(!c.isValid)return c}if(i&&"string"!=typeof i)return{isValid:!1,missingFields:[["error","string"]]};if(n){var l=zl(n,Ql);if(!l.isValid)return l}return{isValid:!0,missingFields:[]}}(e);if(!t.isValid)throw new $n(t.missingFields);n(e)}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Vn.SHIPPING_CONTACT_CHANGED,function(){var n=Xl((function*(n){var{contactOrOption:r}=n.detail;try{return yield e(r)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return n.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(Vn.SHIPPING_OPTION_CHANGED,function(){var n=Xl((function*(n){var{contactOrOption:r}=n.detail;try{return yield e(r)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return n.apply(this,arguments)}}())}}function nu(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function ru(e){return zl(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}class iu{constructor(){this.lockSet=new Set}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}get isLocked(){return this.lockSet.size>0}}class ou extends nn{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,ou.prototype)}}class au extends nn{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super("Method ".concat(e," not implemented yet. Called with ").concat(n)),this.name="UnimplementedError",Object.setPrototypeOf(this,au.prototype)}}!function(e){e.PAYMENT_SELECTION="select-payment",e.CARD_ENTRY="card-entry",e.ACH_ENTRY="ach-entry",e.CASH_APP_ACTIVE="cash-app-active",e.GOOGLE_PAY_ACTIVE="google-pay-active",e.APPLE_PAY_ACTIVE="apple-pay-active",e.SHIPPING_ADDRESS_ENTRY="shipping-address-entry",e.BILLING_ADDRESS_ENTRY="billing-address-entry",e.FULLFILLMENT_SELECTION="fullfillment-selection",e.TOKENIZED_ACH="tokenized-ach",e.TOKENIZED_CARD="tokenized-card",e.TOKENIZED_CASH_APP="tokenized-cash-app",e.TOKENIZED_APPLE_PAY="tokenized-apple-pay",e.TOKENIZED_GOOGLE_PAY="tokenized-google-pay"}(Yl||(Yl={}));var su="ui-cash-app-button",cu="ui-cash-app-qr",lu="&#8226;",uu="ui-button",du="ui-header__title",pu="ui-hidden",hu={[Gn.CARD]:"Pay by card",[Gn.APPLE_PAY]:"Pay by Apple Pay",[Gn.GOOGLE_PAY]:"Pay by Google Pay",[Gn.CASH_APP]:"Pay by Cash App",[Gn.ACH]:"Pay by ACH",[Gn.GIFT_CARD]:"Pay by gift card"},fu={[Or.AMERICAN_EXPRESS]:"American Express",[Or.DISCOVER]:"Discover",[Or.VISA]:"Visa",[Or.UNKNOWN]:"Unknown",[Or.DINERS_CLUB]:"Diners Club",[Or.JCB]:"JCB",[Or.MASTERCARD]:"Mastercard",[Or.UNION_PAY]:"Union Pay"},vu="click",gu="submit",mu="div",yu="button",Eu="span";function _u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Su(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_u(o,r,i,a,s,"next",e)}function s(e){_u(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Cu{constructor(e,t){this.activeTokenization=!1,this.guid=e,this.tokenizationCallback=t,this.element=this.buildAchElements()}getElement(){return this.element}initialize(e){var t=this;return Su((function*(){t.ach=yield e.ach()}))()}initializationTokenization(e){var t=this;if(!this.ach)throw new Ar("Ach is not defined");if(!this.achForm)throw new Ar("Ach form is not defined");this.achForm.addEventListener(gu,function(){var n=Su((function*(n){if(n.preventDefault(),n.stopPropagation(),!t.achBuyerNameInput)throw new Ar("Ach buyer name input is not defined");var r=t.achBuyerNameInput.value;if(0!==r.length&&!t.activeTokenization){if(!t.ach)throw new Ar("Ach is not defined");t.activeTokenization=!0;try{var i=yield t.ach.tokenize({accountHolderName:r});if(t.activeTokenization=!1,i.status!==Bn.OK)throw new au("Payments UI ACH tokenization not OK",i);yield e.transitionTo({state:Yl.TOKENIZED_ACH,model:i}),t.tokenizationCallback(i,void 0)}catch(n){t.activeTokenization=!1,t.handleErrorState(n)}}}));return function(e){return n.apply(this,arguments)}}())}handleErrorState(e){throw new au("Payments UI ACH Tokenization Error")}buildAchElements(){var e=document.createElement("form"),t=document.createElement("input");t.required=!0,t.placeholder="Accountholder Name",t.name="name";var n=document.createElement(yu);return n.type=gu,n.innerText="Pay with Direct Debit (ACH)",e.id="".concat("ui-ach-form","-").concat(this.guid),e.append(t,n),this.achBuyerNameInput=t,this.achForm=e,e}}function Iu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Au(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Iu(o,r,i,a,s,"next",e)}function s(e){Iu(o,r,i,a,s,"throw",e)}a(void 0)}))}}class wu{constructor(e,t){this.activeTokenization=!1,this.guid=e,this.tokenizationCallback=t}initialize(e,t){var n=this;return Au((function*(){return n.applePayButton=document.createElement("button"),n.applePayButton.id="".concat("ui-apple-pay-button","-").concat(n.guid),n.applePay=yield e.applePay(t),{applePayButton:n.applePayButton}}))()}initializeTokenization(e){var t=this;if(!this.applePay)throw new Ar("Apple Pay is not defined");if(!this.applePayButton)throw new Ar("Apple Pay button is not defined");this.applePayButton.addEventListener(vu,function(){var n=Au((function*(n){if(n.preventDefault(),n.stopPropagation(),!t.activeTokenization){if(!t.applePay)throw new Ar("Apple Pay is not defined");try{t.activeTokenization=!0;var r=yield t.applePay.tokenize();if(t.activeTokenization=!1,r.status!==Bn.OK)throw new au("Apple Pay Tokenization failure");e.transitionTo({state:Yl.TOKENIZED_APPLE_PAY,model:r}),t.tokenizationCallback(r,void 0)}catch(e){throw t.activeTokenization=!1,new au("Apple Pay Tokenization failure")}}}));return function(e){return n.apply(this,arguments)}}())}}function Ou(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Pu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ou(o,r,i,a,s,"next",e)}function s(e){Ou(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Tu{constructor(e,t){this.activeTokenization=!1,this.guid=e,this.tokenizationCallback=t,this.element=document.createElement(mu),this.element.className="ui-card-entry-form",this.cardInput=document.createElement(mu),this.cardTokenizationButton=document.createElement(yu),this.cardInput.id="".concat("ui-card-input","-").concat(this.guid),this.cardTokenizationButton.id="".concat("ui-card-button","-").concat(this.guid),this.cardTokenizationButton.classList.add(uu),this.cardTokenizationButton.innerText="Pay",this.element.append(this.cardInput,this.cardTokenizationButton)}getElement(){return this.element}initialize(e){var t=this;return Pu((function*(){t.card=yield e.card({})}))()}attach(){if(!this.card)throw new Ar("Card payment method is not defined");return this.card.attach("#".concat(this.cardInput.id))}initializeTokenization(e){var t=this;if(!this.card)throw new Ar("Card payment method is not defined");if(!this.cardTokenizationButton)throw new Ar("Card button is not defined");this.cardTokenizationButton.addEventListener(vu,function(){var n=Pu((function*(n){if(n.preventDefault(),n.stopPropagation(),!t.activeTokenization){if(!t.card)throw new Ar("Card payment method is not defined");t.activeTokenization=!0;try{var r=yield t.card.tokenize();if(t.activeTokenization=!1,r.status!==Bn.OK)throw new au("Payments UI Card tokenization not OK",r);yield e.transitionTo({state:Yl.TOKENIZED_CARD,model:r}),t.tokenizationCallback(r,void 0)}catch(n){t.activeTokenization=!1,t.handleErrorState(n)}}}));return function(e){return n.apply(this,arguments)}}())}handleErrorState(e){throw new au("Payments UI Card Tokenization Error")}}function bu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ru(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bu(o,r,i,a,s,"next",e)}function s(e){bu(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Nu{constructor(e,t){this.activeTokenization=!1,this.guid=e,this.tokenizationCallback=t}initialize(e,t){var n=this;return Ru((function*(){var r=document.createElement("div"),i=document.createElement("div");return r.id="".concat(su,"-").concat(n.guid),i.id="".concat(cu,"-").concat(n.guid),n.cashApp=yield e.cashApp(t),n.cashAppButton=r,{cashAppButton:r,cashAppQr:i}}))()}attach(){if(!this.cashApp)throw new Ar("CashApp is not defined");return this.cashApp.attachAll({button:"#".concat(su,"-").concat(this.guid),qrCode:"#".concat(cu,"-").concat(this.guid)},{button:{shape:xr.SEMIROUNDED,theme:Dr.DARK}})}initializeTokenization(e){var t=this;return Ru((function*(){if(!t.cashApp)throw new Ar("CashApp is not defined");var n=yield t.cashApp.getRedirectResult();if((null==n?void 0:n.status)===Bn.OK&&t.tokenizationCallback(n,void 0),!t.cashAppButton)throw new Ar("CashApp button is not defined");t.cashAppButton.addEventListener(vu,function(){var n=Ru((function*(n){if(n.preventDefault(),n.stopPropagation(),!t.activeTokenization){if(!t.cashApp)throw new Ar("CashApp is not defined");try{t.activeTokenization=!0;var r=yield t.cashApp.tokenize();if(t.activeTokenization=!1,r.status!==Bn.OK)throw new au("Cash App Tokenization failure");e.transitionTo({state:Yl.TOKENIZED_CASH_APP,model:r}),t.tokenizationCallback(r,void 0)}catch(e){throw t.activeTokenization=!1,new au("Cash App Tokenization failure")}}}));return function(e){return n.apply(this,arguments)}}())}))()}}function Lu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Du(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Lu(o,r,i,a,s,"next",e)}function s(e){Lu(o,r,i,a,s,"throw",e)}a(void 0)}))}}var xu="ui-google-pay-button";class ku{constructor(e,t){this.activeTokenization=!1,this.guid=e,this.tokenizationCallback=t}initialize(e,t){var n=this;return Du((function*(){var r=document.createElement("div");return r.id="".concat(xu,"-").concat(n.guid),r.classList.add("ui-google-pay-button-wrapper"),n.googlePay=yield e.googlePay(t),n.googlePayButton=r,{googlePayButton:r}}))()}attach(){if(!this.googlePay)throw new Ar("GooglePay is not defined");return this.googlePay.attach("#".concat(xu,"-").concat(this.guid))}initializeTokenization(e){var t=this;if(!this.googlePay)throw new Ar("GooglePay is not defined");if(!this.googlePayButton)throw new Ar("GooglePay button is not defined");this.googlePayButton.addEventListener(vu,function(){var n=Du((function*(n){if(n.preventDefault(),n.stopPropagation(),!t.activeTokenization){if(!t.googlePay)throw new Ar("GooglePay is not defined");t.activeTokenization=!0;try{var r=yield t.googlePay.tokenize();if(t.activeTokenization=!1,r.status!==Bn.OK)throw new au("Google Pay Tokenization failure");e.transitionTo({state:Yl.TOKENIZED_APPLE_PAY,model:r}),t.tokenizationCallback(r,void 0)}catch(e){throw t.activeTokenization=!1,new au("Google Pay Tokenization failure")}}}));return function(e){return n.apply(this,arguments)}}())}}var Mu="ui-container__content--offset-right";class Uu{constructor(e){var t=document.createElement("div");t.className="ui-container",this.contentEl=document.createElement("div"),this.contentEl.className="ui-container__content",t.append(this.contentEl),e.append(t)}initialize(e){this.contentEl.append(e)}transitionRight(e,t,n){var r=e.render(n);return r.classList.add(Mu),this.initialize(r),e.postRender&&e.postRender(),r.classList.remove(Mu),t.classList.add("ui-container__content--offset-left"),r}}class Hu{constructor(e){this.element=document.createElement(mu),this.buildElement(),this.onClick=e}getElement(){return this.element}buildElement(){this.element=document.createElement(yu),this.element.classList.add(uu,"ui-button__back"),this.element.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M14 7.99951H1M1 7.99951L8 0.999512M1 7.99951L8 14.9995" stroke="black" stroke-opacity="0.9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n<defs>\n<clipPath id="clip0">\n<rect width="16" height="16" fill="white" transform="translate(0 -0.000488281)"/>\n</clipPath>\n</defs>\n</svg>\n',this.element.addEventListener(vu,(e=>this.onClick(e)))}}function Fu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Gu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Vu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}class Bu{constructor(){this.element=document.createElement(mu),this.buildElement()}getElement(){return this.element}buildElement(){this.element=document.createElement(mu),this.element.classList.add("ui-header");var e=document.createElement(Eu);e.classList.add("ui-header__logo"),e.innerHTML='<svg width="21" height="21" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M22.4877 0H4.51227C2.02052 0 0 2.01991 0 4.51227V22.4877C0 24.9801 2.02052 27 4.51227 27H22.4877C24.9801 27 27 24.9801 27 22.4877V4.51227C27.0006 2.01991 24.9807 0 22.4877 0ZM22.0914 20.6677C22.0914 21.4544 21.4539 22.0912 20.6679 22.0912H6.33526C5.54865 22.0912 4.91114 21.4544 4.91114 20.6677V6.3345C4.91114 5.54789 5.54865 4.91038 6.33526 4.91038H20.6679C21.4539 4.91038 22.0914 5.54789 22.0914 6.3345V20.6677ZM9.81732 16.3593C9.81732 16.8128 10.183 17.1809 10.6346 17.1809H16.3642C16.8171 17.1809 17.1815 16.8128 17.1815 16.3593V10.6383C17.1815 10.1849 16.8171 9.81671 16.3642 9.81671H10.6346C10.183 9.81671 9.81732 10.1849 9.81732 10.6383V16.3593Z" fill="black" fill-opacity="0.9"/>\n</svg>\n',this.element.append(e);var t=document.createElement("h1");t.classList.add(du),t.innerText="Payments",this.element.append(t)}}var ju="ui-payment-select-view",zu="".concat(ju,"__").concat(uu);function qu(e){return Boolean(e)}class Yu{constructor(){this.build()}build(){this.wrapperElement=document.createElement("div"),this.wrapperElement.setAttribute("class","ui-card-icon-container"),this.element=document.createElement("div"),this.element.setAttribute("class","ui-card-icon"),this.wrapperElement.appendChild(this.element),this.updateCardBrand(Ia.UNKNOWN)}updateCardBrand(e){if(e!==this.brand){this.brand=e;var t=za(e);this.element.innerHTML=t.front}}getElement(){return this.wrapperElement}}var Ku="ui-tokenized-view",Wu="".concat(Ku,"__payment-method"),Zu="".concat(Ku,"__card-info-wrapper"),Qu="".concat(Ku,"__card-number");class Ju{constructor(e){this.wrapper=document.createElement("DIV"),this.tokenResult=e,this.buildElement()}getElement(){return this.wrapper}buildElement(){var e,t,n,r,i,o;this.wrapper.classList.add(Ku);var a=new Bu;this.wrapper.append(a.getElement());var s=document.createElement("DIV");s.classList.add(Wu);var c=document.createElement("P");c.classList.add("ui-header__subtitle"),this.tokenResult.details&&(c.innerText=hu[this.tokenResult.details.method]),s.append(c);var l=document.createElement("DIV");l.classList.add(Zu);var u=new Yu,d=(null===(e=this.tokenResult.details)||void 0===e||null===(t=e.card)||void 0===t?void 0:t.brand.toLowerCase())||"";u.updateCardBrand(d),l.append(u.getElement());var p=document.createElement("SPAN");if(p.classList.add(Qu),null!==(n=this.tokenResult.details)&&void 0!==n&&null!==(r=n.card)&&void 0!==r&&r.brand&&null!==(i=this.tokenResult.details)&&void 0!==i&&null!==(o=i.card)&&void 0!==o&&o.last4){var h,f,v,g,m=(null===(h=this.tokenResult.details)||void 0===h||null===(f=h.card)||void 0===f?void 0:f.last4)||"",y=fu[null===(v=this.tokenResult.details)||void 0===v||null===(g=v.card)||void 0===g?void 0:g.brand];p.innerHTML="".concat(y," ").concat(lu).concat(lu).concat(lu).concat(lu," ").concat(m)}l.append(p),s.append(l),this.wrapper.append(s)}}function Xu(e){throw new au("Route: ".concat(e))}function $u(e){throw new Ar("Route: ".concat(e," was called without a model"))}function ed(e,t,n,r){return{[Yl.PAYMENT_SELECTION]:{render:()=>function(e,t,n){var r=document.createElement(mu);r.className=ju;var i=new Bu;r.append(i.getElement());var{cashAppButton:o,googlePayButton:a,applePayButton:s}=t,c=function(e,t){var n=document.createElement(yu);n.classList.add("ui-card-select-button",uu);var r=document.createElement(Eu);r.className="ui-card-select-button__logo";var i=document.createTextNode("Pay by Card");return n.append(r),n.append(i),n.addEventListener(vu,function(){var t,n=(t=function*(t){t.preventDefault(),t.stopPropagation(),yield e.transitionTo({state:Yl.CARD_ENTRY})},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Vu(o,r,i,a,s,"next",e)}function s(e){Vu(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()),n}(e);c.classList.add(zu);var l=function(e,t){var n=document.createElement("button");n.classList.add(uu);var r=document.createElement("span");r.className="";var i=document.createTextNode("Pay by Direct Debit (ACH)");return n.append(r),n.append(i),n.addEventListener(vu,function(){var t,n=(t=function*(t){t.preventDefault(),t.stopPropagation(),yield e.transitionTo({state:Yl.ACH_ENTRY})},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Gu(o,r,i,a,s,"next",e)}function s(e){Gu(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()),n}(e);l.classList.add(zu);var u=document.createElement(mu),d=document.createElement("a");d.classList.add("ui-link"),d.innerText="See more ways to pay",u.append(d);var p=document.createElement(mu);p.className="".concat("ui-payment-select__secondary-methods"," ").concat(pu);var h=[s,a].filter(qu),f=[h[0],o,c].filter(qu),v=[h[1],l].filter(qu);return d.addEventListener(vu,(e=>{e.preventDefault(),e.stopPropagation(),p.classList.remove(pu),u.classList.add(pu)})),p.append(...v),r.append(...f,u,p),r}(e,t)},[Yl.CARD_ENTRY]:{render:()=>{var{cardUI:t}=n;return t?function(e,t){var n=document.createElement(mu);n.className="ui-card-entry-view";var r=document.createElement(mu);r.classList.add("ui-header__wrapper");var i=document.createElement("h1");i.classList.add(du,"ui-header__title--center"),i.innerText=hu[Gn.CARD],r.append(i);var o=new Hu(function(){var t,n=(t=function*(t){t.preventDefault(),t.stopPropagation(),yield e.transitionTo({state:Yl.PAYMENT_SELECTION})},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Fu(o,r,i,a,s,"next",e)}function s(e){Fu(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}());r.append(o.getElement()),n.append(r);var a=t.getElement();return n.append(a),n}(e,t):$u(Yl.CARD_ENTRY)},postRender:()=>{var{cardUI:t}=n;t&&(t.attach(),t.initializeTokenization(e))}},[Yl.TOKENIZED_CARD]:{render:e=>e?new Ju(e).getElement():$u(Yl.TOKENIZED_CARD)},[Yl.ACH_ENTRY]:{render:()=>Xu(Yl.ACH_ENTRY)},[Yl.CASH_APP_ACTIVE]:{render:()=>Xu(Yl.CASH_APP_ACTIVE)},[Yl.GOOGLE_PAY_ACTIVE]:{render:()=>Xu(Yl.GOOGLE_PAY_ACTIVE)},[Yl.APPLE_PAY_ACTIVE]:{render:()=>Xu(Yl.APPLE_PAY_ACTIVE)},[Yl.SHIPPING_ADDRESS_ENTRY]:{render:()=>Xu(Yl.SHIPPING_ADDRESS_ENTRY)},[Yl.BILLING_ADDRESS_ENTRY]:{render:()=>Xu(Yl.BILLING_ADDRESS_ENTRY)},[Yl.FULLFILLMENT_SELECTION]:{render:()=>Xu(Yl.FULLFILLMENT_SELECTION)},[Yl.TOKENIZED_ACH]:{render:()=>Xu(Yl.TOKENIZED_ACH)},[Yl.TOKENIZED_CASH_APP]:{render:()=>Xu(Yl.TOKENIZED_CASH_APP)},[Yl.TOKENIZED_APPLE_PAY]:{render:()=>Xu(Yl.TOKENIZED_APPLE_PAY)},[Yl.TOKENIZED_GOOGLE_PAY]:{render:()=>Xu(Yl.TOKENIZED_GOOGLE_PAY)}}}class td{constructor(e,t,n,r){this.stateHistory=[],this.currentState=Yl.PAYMENT_SELECTION,this.router=ed(this,t,n),this.currentStateUI=this.router[this.currentState].render(),this.container=new Uu(e),this.container.initialize(this.currentStateUI)}transitionTo(e){var{state:t,model:n}=e;console.debug("Transitioning to ".concat(t," from ").concat(this.currentState)),this.stateHistory.push(this.currentState);var r=this.router[t],i=this.container.transitionRight(r,this.currentStateUI,n);this.currentStateUI=i,this.currentState=t}}function nd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nd(o,r,i,a,s,"next",e)}function s(e){nd(o,r,i,a,s,"throw",e)}a(void 0)}))}}class id{constructor(e,t,n,r,i){this.activeMethods={},this.paymentSelectElements={},this.tokenStack=[],this.guid=ea().slice(0,16),this.logger=e,this.payments=t,this.requestedMethods=n,this.paymentRequest=r,this.digitalWalletOptions=i,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.captureTokenization=this.captureTokenization.bind(this),this.initialized=this.initializePaymentMethods(),this.loadStyleSheet()}initializePaymentMethods(){var e=this;return rd((function*(){if(e.requestedMethods.includes(Gn.CASH_APP))try{var t=new Nu(e.guid,e.captureTokenization),{cashAppButton:n,cashAppQr:r}=yield t.initialize(e.payments,e.digitalWalletOptions);e.paymentSelectElements.cashAppButton=n,e.paymentSelectElements.cashAppQr=r,e.activeMethods.cashAppUI=t}catch(t){e.logger.captureException(t)}if(e.requestedMethods.includes(Gn.GOOGLE_PAY))try{var i=new ku(e.guid,e.captureTokenization),{googlePayButton:o}=yield i.initialize(e.payments,e.paymentRequest);e.paymentSelectElements.googlePayButton=o,e.activeMethods.googlePayUI=i}catch(t){e.logger.captureException(t)}if(e.requestedMethods.includes(Gn.CARD))try{var a=new Tu(e.guid,e.captureTokenization);yield a.initialize(e.payments),e.activeMethods.cardUI=a}catch(t){e.logger.captureException(t)}if(e.requestedMethods.includes(Gn.APPLE_PAY))try{var s=new wu(e.guid,e.captureTokenization),{applePayButton:c}=yield s.initialize(e.payments,e.paymentRequest);e.paymentSelectElements.applePayButton=c,e.activeMethods.applePayUI=s}catch(t){e.logger.captureException(t)}if(e.requestedMethods.includes(Gn.ACH))try{var l=new Cu(e.guid,e.captureTokenization);yield l.initialize(e.payments),e.activeMethods.achUI=l}catch(t){e.logger.captureException(t)}try{yield e.stylesLoadedPromise}catch(t){throw e.logger.captureException(t),new Cr(t)}}))()}setCallback(e){if(this.tokenizationCallback=e,this.tokenStack.length>0){var t=this.tokenStack.pop();if(t){var{tokenResult:n,error:r}=t;this.tokenizationCallback(n,r)}}}attachPaymentSelectMethods(e){var t=this;return rd((function*(){yield t.initialized;var n=new td(e,t.paymentSelectElements,t.activeMethods,t.paymentRequest),r=[],{cashAppUI:i}=t.activeMethods;i&&(r.push(i.attach()),i.initializeTokenization(n));var{googlePayUI:o}=t.activeMethods;o&&(r.push(o.attach()),o.initializeTokenization(n));var{applePayUI:a}=t.activeMethods;a&&a.initializeTokenization(n),yield Promise.allSettled(r)}))()}captureTokenization(e,t){this.tokenizationCallback?this.tokenizationCallback(e,t):this.tokenStack.push({tokenResult:e,error:t})}loadStyleSheet(){nl.addStyleElement(_.PAYMENTS_UI_STYLES,"ui-style-loader",this.resolveStylePromise,this.rejectStylePromise)}}function od(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var ad,sd=Object.values(Gn);class cd{constructor(e,t,n){this.attached=!1,this.requestedMethods=[],this.payments=e,this.context=t,this.metricsHandler=this.context.metricsHandler,this.errorLogger=this.context.errorLogger,this.paymentRequest=n.paymentRequest,this.validateOptions(n),this.coordinator=new id(this.errorLogger,this.payments,this.requestedMethods,this.paymentRequest,this.digitalWalletOptions)}attach(e){var t,n=this;return(t=function*(){if(n.attached)throw new ur(pi.PaymentsUI);var t;n.metricsHandler.logEvent(oi.AttachStart);try{t=$c(e),yield n.coordinator.attachPaymentSelectMethods(t),n.attached=!0,n.metricsHandler.logEvent(oi.AttachOK)}catch(e){throw n.metricsHandler.logEvent(oi.AttachError),n.errorLogger.captureException(e),e}},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){od(o,r,i,a,s,"next",e)}function s(e){od(o,r,i,a,s,"throw",e)}a(void 0)}))})()}onTokenization(e){if(!this.attached)throw new dr("Payments UI");this.coordinator.setCallback(e)}validateOptions(e){if(this.digitalWalletOptions={redirectURI:e.redirectURI,totalTransactionAmount:{amount:Number.parseInt(e.paymentRequest.total.amount,10),currencyCode:e.paymentRequest.currencyCode},transactionId:e.transactionId},xa(this.digitalWalletOptions,!0),e.enableMethods&&e.disableMethods)throw new tr("`enableMethods` and `disableMethods` cannot be used together");if(e.enableMethods&&0===e.enableMethods.length)throw new tr("`enableMethods` cannot be empty");if(e.disableMethods&&0===e.disableMethods.length)throw new tr("`disableMethods` cannot be empty");if(e.enableMethods&&(this.requestedMethods=e.enableMethods),e.disableMethods&&(this.requestedMethods=sd.filter((t=>{var n;return!(null!=e&&null!==(n=e.disableMethods)&&void 0!==n&&n.includes(t))}))),e.enableMethods||e.disableMethods||(this.requestedMethods=sd),0===this.requestedMethods.length)throw new tr("all available payment methods are disabled")}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(ad||(ad={}));var ld=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(_.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[n,r]=e;t.searchParams.set(n,r)})),t.toString()}(e);return Wc({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},ud=function(e){var t=new(vi[e.name]||nn);return t.fromSerializedError(e),t},dd=function(e){var t=e;return!0===t._isSerializedError&&void 0!==t.name&&void 0!==t.message},pd=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}},hd="channel:connected",fd="channel:connecting",vd="channel:close",gd="channel:error";class md{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(fd):this.handleConnecting(e);break;case this.messageWithName(hd):this.handleConnected();break;case this.messageWithName(vd):this.close();break;case this.messageWithName(gd):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=e?":".concat(e):""}close(){this.port&&(this.postMessage(this.messageWithName(vd)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new Jr("message channel is already connected");if(e){if(void 0===e.origin)throw new Jr("message channel remote.origin must be defined");if(null===e.window)throw new Jr("message channel remote.window cannot be null");var t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(fd),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorLogger(e){this.errorLogger=e}set onmessage(e){this.listeners.push(e)}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new Jr("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(hd)),this.connectionEstablished()}handleConnected(){if(this.connected)throw new Jr("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(gd)),this.errorLogger&&this.errorLogger.captureException(new Jr("message channel failed to deserialize message: ".concat(JSON.stringify(e))))}}messageWithName(e){return e+this.name}}var yd,Ed=In.secondsToMs(128),_d=In.secondsToMs(2);!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(yd||(yd={}));class Sd{constructor(e){this.messageListeners={},this.channel=new md(e),this.channel.onmessage=this.handleMessage.bind(this)}setErrorLogger(e){this.errorLogger=e,this.channel.setErrorLogger(e)}sendOneWayMessage(e,t){var{payload:n,options:r}=t||{},{session:i,paymentMethodInstanceId:o,paymentMethodTrackingId:a,featureFlagValues:s}=r||{};return this.message({featureFlagValues:s,id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:n,paymentMethodInstanceId:o,paymentMethodTrackingId:a,session:i,type:e})}sendMessage(e,t){var{payload:n,options:r}=t||{},{session:i,paymentMethodInstanceId:o,paymentMethodTrackingId:a,featureFlagValues:s}=r||{};return this.message({featureFlagValues:s,id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:n,paymentMethodInstanceId:o,paymentMethodTrackingId:a,session:i,type:e})}request(e,t){var{payload:n,options:r}=t||{},{session:i,paymentMethodInstanceId:o,paymentMethodTrackingId:a,featureFlagValues:s}=r||{};return this.message({featureFlagValues:s,id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:n,paymentMethodInstanceId:o,paymentMethodTrackingId:a,session:i,type:e})}respond(e,t){var n="".concat(e.type,":").concat(yd.OK);return this.postResponse(n,e,t)}reject(e,t){var n="".concat(e.type,":").concat(yd.ERROR);if(t instanceof nn){var r=pd(t);return this.postResponse(n,e,r)}return this.postResponse(n,e,t)}onMessage(e,t){var n=t||this.uniqueId();return this.addMessageEventListener(e,n),n}connect(e,t){this.iframeID=t,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){var t,n=this.messageListeners[e.data.type];e.data.type&&"undefined"!==e.data.type?n?(e.data.mustAcknowledge&&this.acknowledge(e.data),Object.values(n).forEach((t=>{t.forEach((t=>{t(e)}))}))):"development"===_.env&&console.error(new Jr("Listener does not exist for ".concat(e.data.type,", it must be added to message-bus"))):null===(t=this.errorLogger)||void 0===t||t.captureException(new Jr("Received a messenger message with an undefined type"))}logMessengerTimeout(e,t){var n,r,i=new $r(e.type,e.id,this.iframeID),o={iframeID:String(this.iframeID),messageId:String(e.id),timeoutSeconds:String(In.msToSeconds(t))};this.errorLogger&&this.errorLogger.captureException(i,null===(n=e.session)||void 0===n?void 0:n.instanceId,null===(r=e.session)||void 0===r?void 0:r.sessionId,o)}handleMessageContract(e){if(!e.mustAcknowledge)return new Promise((e=>{e({})}));var t,n,r=()=>{[yd.ACK,yd.OK,yd.ERROR].forEach((n=>{delete this.messageListeners["".concat(e.type,":").concat(n)][t]}))},i=_d,o=0,a=()=>{if(o<Ed){var t=i-o;n=window.setTimeout((()=>{o+=t,this.logMessengerTimeout(e,o),a()}),t),i*=2}};return a(),new Promise(((i,o)=>{t=this.onMessage({listener(){clearTimeout(n),e.mustRespond||(r(),i({}))},messageType:"".concat(e.type,":").concat(yd.ACK)}),this.onMessage({listener(e){r(),i(e.data.payload)},messageType:"".concat(e.type,":").concat(yd.OK)},t),this.onMessage({listener(e){r();var{payload:t}=e.data;if(dd(t)){var n=ud(t);o(n)}else o(t)},messageType:"".concat(e.type,":").concat(yd.ERROR)},t)}))}acknowledge(e){var t="".concat(e.type,":").concat(yd.ACK);return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:t})}postResponse(e,t,n){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:n,type:e})}message(e){var t,n=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||null===(t=this.errorLogger)||void 0===t||t.captureException(new Jr("Attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),n}addMessageEventListener(e,t){var{messageType:n,listener:r}=e;this.messageListeners[n]=this.messageListeners[n]||{},this.messageListeners[n][t]=this.messageListeners[n][t]||[],this.messageListeners[n][t].push(r)}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}function Cd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Id(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Cd(o,r,i,a,s,"next",e)}function s(e){Cd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Ad(){return(Ad=Id((function*(e,t,n,r){var i=new Sd(r);return i.setErrorLogger(t),i.connect({origin:_.ASSET_URL,window:e.contentWindow},e.id),yield i.sendMessage(Ho,{payload:n}),i}))).apply(this,arguments)}var wd={build:function(e,t,n,r){return Ad.apply(this,arguments)}};function Od(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Pd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Od(o,r,i,a,s,"next",e)}function s(e){Od(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Td(){return(Td=Pd((function*(e,t,n,r){var{applicationId:i,locationId:o,hostname:a,sourceUrl:s}=e;t.logEvent({event:oi.InitializeStart,eventSource:pi.App});var c,l,u=r.getCurrentLocale();try{c=yield ld({applicationId:i,hostname:a})}catch(e){if(t.logEvent({event:oi.InitializeError,eventSource:pi.App}),n.captureException(e),e instanceof Jr)throw new Ar("initializing the payment method");throw e}try{l=yield wd.build(c,n,{applicationId:i,hostname:a,locale:u,locationId:o});var{avt:d,sessionId:p,applePartnerInternalMerchantIdentifier:h,instanceId:f,paymentMethodSupportDetail:v,featureFlagValues:g}=yield l.request(ad.REQUEST_HYDRATION,{payload:{applicationId:i,hostname:a,locationId:o}});t.setAvt(d);var m=new qc({applePayMerchantIdentifier:h,applicationId:i,avt:d,hostname:a,instanceId:f,locale:u,locationId:o,sessionId:p,sourceUrl:s});return t.logEvent({event:oi.InitializeOK,eventSource:pi.App,internalConfigurationValues:g},f,p),{featureFlagValues:g,localeStrings:r,messenger:l,paymentMethodSupportDetail:v,session:m}}catch(e){if(t.logEvent({event:oi.InitializeError,eventSource:pi.App}),n.captureException(e),e instanceof Jr)throw new Ar("initializing the payment method");throw e}}))).apply(this,arguments)}function bd(){return(bd=Pd((function*(e,t,n){var{applicationId:r,locationId:i,sourceUrl:o}=e.serialize();try{var a=yield va.getToken({applicationId:r,locationId:i,websiteUrl:o});e.setAnalyticsToken(a)}catch(r){r instanceof mr&&t.captureException(r,e.instanceId,e.sessionId),n&&window.clearInterval(n)}}))).apply(this,arguments)}var Rd,Nd={initializeAnalytics:function(e,t,n){return bd.apply(this,arguments)},initializePayment:function(e,t,n,r){return Td.apply(this,arguments)},validateVerificationDetails:function(e,t){var n=[];return e.billingContact&&"object"==typeof e.billingContact||n.push(new Qo(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE"].includes(e.intent)||n.push(new Qo(t,"details.intent","string")),"CHARGE"===e.intent&&(e.amount&&"string"==typeof e.amount||n.push(new Qo(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||n.push(new Qo(t,"details.currencyCode","string"))),n}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Rd||(Rd={}));var Ld,Dd={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},xd=["email","phone"];function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(n),!0).forEach((function(t){Ud(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ud(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.PENDING="pending",e.FINAL="final"}(Ld||(Ld={}));var Hd={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Fd=["visa","masterCard","jcb","discover","amex"];function Gd(e){return{amount:e.amount,label:e.label,type:e.pending?Ld.PENDING:Ld.FINAL}}function Vd(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Bd(e,t){return t?Gd(t):e}function jd(e,t){return t?t.map(Gd):e}function zd(e,t){return t?t.map(Vd):e}function qd(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function Yd(e){var{addressLines:t,locality:n,administrativeArea:r,postalCode:i,countryCode:o,givenName:a,familyName:s,emailAddress:c,phoneNumber:l}=e;return{addressLines:t,city:n,countryCode:o&&o.toUpperCase(),email:c,familyName:s,givenName:a,phone:l,postalCode:i,state:r}}function Kd(e){var t=Yd(e),{email:n,phone:r}=t;return function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,xd)}function Wd(e){var{amount:t,identifier:n,label:r}=e;return{amount:t,id:n,label:r}}function Zd(e,t){return{errors:(n=e,r=[],n.error&&r.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,n]=e,i=Hd[t]||"postalAddress";r.push(new window.ApplePayError("shippingContactInvalid",i,n))})),r),newLineItems:jd(t.lineItems,e.lineItems),newShippingMethods:zd(t.shippingMethods,e.shippingOptions),newTotal:Bd(t.total,e.total)};var n,r}function Qd(e,t){var n=Zd(e,t);return Md({status:window.ApplePaySession.STATUS_SUCCESS},n)}function Jd(e,t){return{newLineItems:jd(t.lineItems,e.lineItems),newTotal:Bd(t.total,e.total)}}function Xd(e,t){var n=Zd(e,t);return Md({status:window.ApplePaySession.STATUS_SUCCESS},n)}function $d(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ep(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$d(o,r,i,a,s,"next",e)}function s(e){$d(o,r,i,a,s,"throw",e)}a(void 0)}))}}class tp extends ga{constructor(e,t,n){if(super(t),this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.paymentRequestLockController=n,this.req=e,void 0===window.ApplePaySession)throw new vr(Wo.APPLE_PAY_BROWSER_NOT_SUPPORTED);if(!window.ApplePaySession.canMakePayments())throw new vr(Wo.APPLE_PAY_DEVICE_NOT_SUPPORTED);this.validateConfiguration()}tokenize(){var e=this;return ep((function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new pr(Gn.APPLE_PAY);if(e.sessionInProgress)throw new Ir([Ea]);e.applePayPaymentRequest=function(e,t){var n=[...Fd];null!=t&&t.isActive(ko.CanUseInterac)&&n.push("interac");var r,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:jd([],e.lineItems),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:zd([],e.shippingOptions),supportedNetworks:n,total:Gd(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(r=e.shippingContact).addressLines,administrativeArea:r.state,country:Dd[r.countryCode],countryCode:r.countryCode,emailAddress:r.email,familyName:r.familyName,givenName:r.givenName,locality:r.city,phoneNumber:r.phone,postalCode:r.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(qd(),e.applePayPaymentRequest),e.applePaySession.onshippingcontactselected=t=>{e.shippingContactChanged(t.shippingContact,e.applePayPaymentRequest)},e.applePaySession.onshippingmethodselected=t=>{e.shippingOptionChanged(t.shippingMethod,e.applePayPaymentRequest)};var t=new Promise((t=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(ai.ExternalSessionCancel),e.deleteApplePaySession(),t({status:ya.CANCEL})}})),n=new Promise(((t,n)=>{e.applePaySession.onvalidatemerchant=function(){var r=ep((function*(r){try{var i=yield e.requestApplePayMerchantValidity(r.validationURL,e.applePayPaymentRequest);t(i)}catch(e){n(e)}}));return function(e){return r.apply(this,arguments)}}()})),r=new Promise(((t,n)=>{e.applePaySession.onpaymentauthorized=function(){var r=ep((function*(r){try{var i=yield e.requestApplePayCardNonce(r);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),n(t)}}));return function(e){return r.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(ai.ExternalSessionStart),e.applePaySession.begin();try{var i=yield n;e.applePaySession.completeMerchantValidation(i);var{status:o,token:a,details:s}=yield Promise.race([r,t]);return e.metricsHandler.logEvent(ai.ExternalSessionOK),o===ya.SUCCESS?{details:s,status:Bn.OK,token:a}:{status:Bn.CANCEL}}catch(t){throw e.metricsHandler.logEvent(ai.ExternalSessionError),t}}))()}destroy(){return this.metricsHandler.logEvent(si.Destroyed),this.isDestroyed=!0,this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),Promise.resolve()}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new vr(Wo.INVALID_CONFIG,"applePayMerchantIdentifier");if(!e.locationId)throw new vr(Wo.INVALID_CONFIG,"locationId")}requestApplePayCardNonce(e){var t=this;return ep((function*(){var n={applepayData:e.payment},r=t.session,i=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var o=yield t.messenger.request(Rd.REQUEST_APPLE_PAY_CARD_NONCE,{options:{paymentMethodTrackingId:t.context.getPaymentMethodTrackingId(),session:r},payload:n});return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,t.context.setSessionId(o.sessionId),function(e,t){var{card:n,cardNonce:r,shippingContact:i}=e,o=n;o.billing&&(o=Object.assign({},o,{billing:Kd(o.billing)}));var a={details:{card:o,method:Gn.APPLE_PAY},status:ya.SUCCESS,token:r};if(i){var s={contact:Yd(i)};t&&(s.option=Wd(t)),a.details.shipping=s}return a}(o,i)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e instanceof Ir||t.errorLogger.captureException(e,r.instanceId,r.sessionId),e}}))()}requestApplePayMerchantValidity(e,t){var n=this;return ep((function*(){var r,i=t&&t.total?t.total.label:null,o=n.session,a={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{r=yield n.messenger.request(Rd.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,{options:{paymentMethodTrackingId:n.context.getPaymentMethodTrackingId(),session:o},payload:a})}catch(e){throw n.applePaySession.abort(),n.deleteApplePaySession(),e}try{return JSON.parse(r.session)}catch(e){throw n.applePaySession.abort(),n.deleteApplePaySession(),n.errorLogger.captureException(new Jr(e.message,Gn.APPLE_PAY),n.session.instanceId,n.session.sessionId),new Ar("parsing Apple Pay merchant validity")}}))()}shippingContactChanged(e,t){var n=qd()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(Vn.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(Vn.SHIPPING_CONTACT_CHANGED,{contactOrOption:Yd(e)},(e=>{this.handleShippingContactUpdate(n,e)})):this.handleShippingContactUpdate(n)}handleShippingContactUpdate(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null===(t=n.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===r&&null!==i&&(r=Wd(i)),void 0!==r&&this.req.hasEventListener(Vn.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Vd(r),this.req.dispatchEvent(Vn.SHIPPING_OPTION_CHANGED,{contactOrOption:r},(t=>{e(Object.assign({},n,t))}))):e(n)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var n=qd()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(Vn.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(Vn.SHIPPING_OPTION_CHANGED,{contactOrOption:Wd(e)},n):n()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Zd(n,e);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ai.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Qd(n,e);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ai.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r.status,r.newShippingMethods,r.newTotal,r.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Jd(n,e);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ai.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(r)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Xd(n,e);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ai.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(r.status,r.newTotal,r.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new Jr(e,"Apple Pay"),this.session.instanceId,this.session.sessionId),new Ar(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(oi.FirstInteraction),this.wasFirstInteractionCalled=!0)}}function np(e,t){return Intl.NumberFormat(g.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}var rp=["PAN_ONLY","CRYPTOGRAM_3DS"],ip=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function op(e){return{label:e.label,price:e.amount,status:e.pending?s.Estimated:s.Final,type:"LINE_ITEM"}}function ap(e,t){return t.map((t=>function(e,t){return{description:np(t.amount,e),id:t.id,label:t.label}}(e,t)))}function sp(e,t,n,r){var i=null!=r?r:n;if(i&&i.length>0){var o={shippingOptions:ap(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function cp(e,t){return null==t?void 0:t.find((t=>t.id===e))}function lp(e,t,n,r,i,o){var{countryCode:a,currencyCode:s,total:c,lineItems:l,requestBillingContact:u,requestShippingContact:d,shippingOptions:p}=t,h=nu(t),f=Boolean(d||h),v=Object.assign({},e,{emailRequired:Boolean(u),merchantInfo:i,shippingAddressRequired:f,shippingOptionRequired:h,transactionInfo:{countryCode:a,currencyCode:s,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:r}});if(l&&l.length>0&&(v.transactionInfo.displayItems=l.map((e=>op(e)))),f&&(v.shippingAddressParameters={phoneNumberRequired:!0}),h){var g=sp(s,o,[],p);g&&(v.shippingOptionParameters=g)}return n.length>0&&(v.callbackIntents=n),v}function up(e,t){var n=[];return e.error&&n.push({intent:t,message:e.error,reason:Lr.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[r,i]=e;n.push({intent:t,message:"".concat(r,": ").concat(i),reason:Lr.SHIPPING_ADDRESS_INVALID})})),n}function dp(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function pp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){dp(o,r,i,a,s,"next",e)}function s(e){dp(o,r,i,a,s,"throw",e)}a(void 0)}))}}var hp=["#google"];class fp extends ga{constructor(e,t,n,r,i){var o;super(n),this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=r,this.element=null,nu(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var n=[],r=nu(e)&&t.includes(Vn.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(Vn.SHIPPING_CONTACT_CHANGED);return r?n.push(c.SHIPPING_ADDRESS,c.SHIPPING_OPTION):i&&n.push(c.SHIPPING_ADDRESS),(!g.isAndroid()||r||i)&&n.push(c.PAYMENT_AUTHORIZATION),n}(this.req,this.handlers);var a,s,h,f,v=function(e,t,n){var r={environment:_.GOOGLE_PAY_ENV,merchantInfo:n},i=e.includes(c.SHIPPING_OPTION)||e.includes(c.SHIPPING_ADDRESS);if(!g.isAndroid()||i){var o={onPaymentAuthorized:()=>({transactionState:p.SUCCESS})};i&&(o.onPaymentDataChanged=t),r.paymentDataCallbacks=o}return r}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(v),this.isReadyToPayRequest=(a=this.session.applicationId,s=this.req.requestBillingContact,h=this.featureFlagHandler,f=[...ip],null!=h&&h.isActive(ko.CanUseInterac)&&f.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:rp,allowedCardNetworks:f,billingAddressParameters:{format:s?l.FULL:l.MIN,phoneNumberRequired:Boolean(s)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:d.PAYMENT_GATEWAY},type:u.CARD}],apiVersion:2,apiVersionMinor:0})}attach(e,t){var n=this;return pp((function*(){var r,i,o;if(n.isDestroyed)throw new pr(Gn.GOOGLE_PAY);var a=null!==(r=null==t?void 0:t.buttonColor)&&void 0!==r?r:br.DEFAULT,s=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:Rr.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Nr.LONG;n.metricsHandler.logEvent(oi.AttachStart),n.metricsHandler.logEvent(si.Configured,t);try{n.element=Xc(e,Jc)}catch(e){throw n.metricsHandler.logEvent(oi.AttachError),e}n.isReadyToPay=yield n.checkIfReadyToPay(oi.AttachError);try{var l=n.googlePayClient.createButton({buttonColor:a,buttonSizeMode:s,buttonType:c,onClick:()=>{}});return n.element.appendChild(l),n.metricsHandler.logEvent(oi.AttachOK),Promise.resolve()}catch(e){throw n.errorLogger.captureException(e),n.metricsHandler.logEvent(oi.AttachError),new vr(Wo.UNKNOWN,e)}}))()}destroy(){return this.metricsHandler.logEvent(si.Destroyed),this.isDestroyed=!0,this.element&&(this.element.innerHTML=""),Promise.resolve()}tokenize(){var e=this;return pp((function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new pr(Gn.GOOGLE_PAY);var t;e.metricsHandler.logEvent(ai.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(ai.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(ai.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(ai.ExternalSessionCancel),{status:Bn.CANCEL};if(e.metricsHandler.logEvent(ai.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new Jr(JSON.stringify(t),Gn.GOOGLE_PAY)),new Ar("tokenizing Google Pay.")}var{token:n,details:r}=yield e.requestGooglePayCardNonce(t);return{details:r,status:Bn.OK,token:n}}))()}validateConfiguration(){var e=hp.join(", ");if(document.querySelectorAll(e).length>0)throw new fr(Gn.GOOGLE_PAY,e)}checkIfReadyToPay(e){var t=this;return pp((function*(){var n;try{var r;!1===(null===(r=n=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest))||void 0===r?void 0:r.result)&&t.errorLogger.captureException(new Jr("googlePayClient.isReadyToPay returned false result"))}catch(e){t.errorLogger.captureException(new Jr('Calling googlePayClient.isReadyToPay threw "'.concat(e,'"'))),n={result:!1}}var i=Boolean(n.result);if(!i)throw e&&t.metricsHandler.logEvent(e),new vr(Wo.GOOGLE_PAY_BROWSER_NOT_SUPPORTED);var o=t.callbackIntents.length>0?s.Unknown:s.Final;return t.googlePayClient.prefetchPaymentData(lp(t.isReadyToPayRequest,t.req,t.callbackIntents,o,t.merchantInfo,t.selectedShippingOptionId)),i}))()}get handlers(){var e=[];return this.req.hasEventListener(Vn.SHIPPING_OPTION_CHANGED)&&e.push(Vn.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(Vn.SHIPPING_CONTACT_CHANGED)&&e.push(Vn.SHIPPING_CONTACT_CHANGED),e}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(lp(this.isReadyToPayRequest,this.req,this.callbackIntents,s.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case c.INITIALIZE:case c.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case c.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new Jr("Unknown callbackTrigger: ".concat(e.callbackTrigger))),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return pp((function*(){var n;t.selectedShippingOptionId=null===(n=e.shippingOptionData)||void 0===n?void 0:n.id;var{updatedOptionRequest:r,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(r,i)}))()}dispatchShippingOptionChanged(e,t){var n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(Vn.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var r=cp(e,t);return r?this.isDestroyed?Promise.resolve({optionErrors:[{intent:c.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Lr.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(Vn.SHIPPING_OPTION_CHANGED,{contactOrOption:r},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e({optionErrors:up(t,c.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return pp((function*(){var{updatedContactRequest:n,contactErrors:r}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(n,r);var i,o=t.shippingOptions;void 0!==n.shippingOptions?(o=n.shippingOptions,t.selectedShippingOptionId=n.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:a,optionErrors:s}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},n,a),l=[...r,...s];return t.paymentDataChangedComplete(c,l)}))()}dispatchShippingContactChanged(e){var t={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var r;void 0!==e.shippingAddress&&this.handlers.includes(Vn.SHIPPING_CONTACT_CHANGED)?this.isDestroyed?n({contactErrors:[{intent:c.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Lr.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):this.req.dispatchEvent(Vn.SHIPPING_CONTACT_CHANGED,{contactOrOption:(r=e.shippingAddress,{city:r.locality,countryCode:r.countryCode,postalCode:r.postalCode,state:r.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n({contactErrors:up(e,c.SHIPPING_ADDRESS),updatedContactRequest:e})})):n(t)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var n=function(e,t,n,r){var i,o,a,s,{total:c,countryCode:l,currencyCode:u,lineItems:d}=t,p=n,h=op(null!==(i=e.total)&&void 0!==i?i:c),f={totalPrice:h.price,totalPriceLabel:h.label,totalPriceStatus:h.status},v=Object.assign({},{countryCode:l,currencyCode:u},f),g=(o=d,(s=null!=(a=e.lineItems)?a:o)?s.map((e=>op(e))):[]);g.length>0&&(v.displayItems=g);var m={newTransactionInfo:v},y=sp(u,r,p,e.shippingOptions);return y&&(m.newShippingOptionParameters=y),m}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(n.error=t[0]),n}requestGooglePayCardNonce(e){var t=this;return pp((function*(){var n=t.session,r=cp(t.selectedShippingOptionId,t.shippingOptions);try{var i=yield t.messenger.request($o.REQUEST_GOOGLE_PAY_CARD_NONCE,{options:{paymentMethodTrackingId:t.context.getPaymentMethodTrackingId(),session:n},payload:e});return t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.context.setSessionId(i.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:n,cardNonce:r,contact:i}=e,o={details:{card:n,method:Gn.GOOGLE_PAY},token:r};return void 0!==i&&(o.details.shipping={contact:i},t&&(o.details.shipping.option=t)),o}(i,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof Ir||t.errorLogger.captureException(e,n.instanceId,n.sessionId),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oi.FirstInteraction))}}var vp=function(e,t,n){return new tp(e,t,n)},gp=function(e,t,n,r,i){return new fp(e,t,n,r,i)};function mp(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function yp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){mp(o,r,i,a,s,"next",e)}function s(e){mp(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Ep(e,t){var{paymentMethodSupportDetail:n,metricsHandler:r}=t;if(!t.getSession().locationId)throw new vr(Wo.INVALID_CONFIG,"locationId");if(n&&n[e]&&!n[e].IsSupported){var{UnsupportedReasonType:i}=n[e],o=Wo.UNKNOWN;throw i&&i in Ko&&(o=Zo[i]),r.logEvent(oi.BuildError),new vr(o)}}function _p(e,t){var{isValid:n,missingFields:r}=ru(e);if(!n)throw t.metricsHandler.logEvent(oi.BuildError),new Xn(r)}function Sp(){return(Sp=yp((function*(e,t){return{authJwt:(yield e.request($o.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{options:{session:t}})).token,merchantId:_.GOOGLE_PAY_MERCHANT_ID}}))).apply(this,arguments)}class Cp{constructor(e,t,n){this.localeStrings=new Xi(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=n,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return yp((function*(){try{var n=yield t.getPaymentContext(pi.App);if(!n.featureFlagHandler.isActive(ko.CanUseOverrideStrings))throw new gr("overrideStrings");n.metricsHandler.logEvent(si.OverrideStrings,e),n.setTranslationOverrides(e)}catch(e){if(e instanceof Jr)throw t.errorLogger.captureException(e),new Ar("overriding the strings");throw e}}))()}setLocale(e){var t=this;return yp((function*(){try{var n=yield t.getPaymentContext(pi.App);return n.metricsHandler.logEvent(si.SetLocale,e),n.setLocale(e)}catch(e){if(e instanceof Jr)throw t.errorLogger.captureException(e),new Ar("setting the locale");throw e}}))()}verifyBuyer(e,t){var n=this;return yp((function*(){var r=[];if(n.paymentOptions.locationId&&0!==n.paymentOptions.locationId.length||r.push(new Qo("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||r.push(new Qo("verifyBuyer","source","string")),t&&"object"==typeof t?r.push(...Nd.validateVerificationDetails(t,"verifyBuyer")):r.push(new Qo("verifyBuyer","details","object")),r.length>0)throw new Jo(r);var i=yield n.getPaymentContext(pi.App);try{i.metricsHandler.logEvent(oi.VerificationStart);var o=yield va.verifyBuyer({applicationId:n.paymentOptions.applicationId,locationId:n.paymentOptions.locationId,websiteUrl:n.paymentOptions.sourceUrl},e,t);return i.metricsHandler.logEvent(oi.VerificationOK),o}catch(e){if(i.metricsHandler.logEvent(oi.VerificationError),e instanceof mr)throw n.errorLogger.captureException(e),e;throw new ir(e)}}))()}card(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.Card);n.metricsHandler.logEvent(oi.BuildStart);try{var r=new pl(n,e);return n.metricsHandler.logEvent(oi.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}paymentRequest(e){var t=new iu;this.metrics.logEvent({event:si.Configured,eventConfigurationValues:e,eventSource:pi.PaymentRequest});var n=new tu(e,this.localeStrings,t,this.metrics);return this.paymentRequestLockMap.set(n,t),n}googlePay(e){var t=this;return yp((function*(){var n,r,i=yield t.getPaymentContext(pi.GooglePay);i.metricsHandler.logEvent(oi.BuildStart),Ep(No.GOOGLE_PAY,i),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(oi.BuildError),new vr(Wo.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}(i),_p(e,i);try{var o=function(e,t){return Sp.apply(this,arguments)}(i.messenger,i.getSession()),a=sa();[n,r]=yield Promise.all([a,o])}catch(e){throw i.metricsHandler.logEvent(oi.BuildError),e}try{var s=t.getPaymentRequestLock(e),c=gp(n,e,i,r,s);return i.metricsHandler.logEvent(oi.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(oi.BuildError),e}}))()}applePay(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.ApplePay);n.metricsHandler.logEvent(oi.BuildStart),Ep(No.APPLE_PAY,n),_p(e,n);try{var r=t.getPaymentRequestLock(e),i=vp(e,n,r);return n.metricsHandler.logEvent(oi.BuildOK),i}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}ach(){var e=this;return yp((function*(){var t=yield e.getPaymentContext(pi.Ach);t.metricsHandler.logEvent(oi.BuildStart),Ep(No.ACH,t);try{var n=yield ca();return t.metricsHandler.logEvent(oi.BuildOK),new Da(n,t)}catch(e){throw t.metricsHandler.logEvent(oi.BuildError),e}}))()}cashApp(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.CashApp);n.metricsHandler.logEvent(oi.BuildStart),Ep(No.CASH_APP,n);try{var r=new Tl(n,e);return n.metricsHandler.logEvent(oi.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}alipay(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.Alipay);n.metricsHandler.logEvent(oi.BuildStart),Ep(No.ALIPAY,n);try{var r=new Ua(n,e);return n.metricsHandler.logEvent(oi.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}giftCard(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.GiftCard);n.metricsHandler.logEvent(oi.BuildStart);try{var r=new Hl(n,e);return n.metricsHandler.logEvent(oi.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}ui(e){var t=this;return yp((function*(){var n=yield t.getPaymentContext(pi.PaymentsUI);if(n.metricsHandler.logEvent(oi.BuildStart),!n.featureFlagHandler.isActive(ko.CanUsePaymentsUI))throw n.metricsHandler.logEvent(oi.BuildError),new ou;_p(e.paymentRequest,n);try{var r=new cd(t,n,e);return n.metricsHandler.logEvent(oi.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(oi.BuildError),e}}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Nd.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var t=this.analyticsInterval=window.setInterval((()=>{Nd.initializeAnalytics(e,this.errorLogger,t)}),da);Nd.initializeAnalytics(e,this.errorLogger,t)}}getPaymentContext(e){var t=this;return yp((function*(){var{featureFlagValues:n,messenger:r,session:i,paymentMethodSupportDetail:o}=yield t.initializePaymentMethod();i.avt&&t.errorLogger.setAvt(i.avt);var a=ea(),s=new class{constructor(e,t,n,r){this.metricsLogger=e,this.eventSource=n,this.session=t,this.paymentMethodTrackingId=r}logEvent(e,t){var n={event:e,eventSource:this.eventSource};void 0!==t&&(n.eventConfigurationValues=t);var{instanceId:r,sessionId:i}=this.session.serialize();return this.metricsLogger.logEvent(n,r,i,this.paymentMethodTrackingId)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}(t.metrics,i,e,a);t.setAnalytics(i),t.contextEventTarget||(t.contextEventTarget=new Xo);var c=new zo(t.errorLogger,r,s,i,o,t.localeStrings,t.contextEventTarget,n);if(!c.featureFlagHandler.isActive(ko.CanUseWebSDK))throw new ln;return c}))()}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var n=new Ar("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(n),n}return t}}var Ip=_.ENABLE_ERROR_LOGGING,Ap=_.env,wp=new Map;window.Square={errors:gi,payments:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,"-").concat(t);if(wp.has(n))return wp.get(n);if(!pn(g.windowLocation))throw new lr;if(!g.isSupported())throw new cr;gn(e);var r=new cn({applicationId:e,applicationUrl:window.location.origin,enableErrorLogging:Ip,environment:Ap,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:_.VERSION}),i=g.windowLocation.hostname,o=g.windowLocation.origin,a={applicationId:e,hostname:i,locationId:t,sourceUrl:o},s=new xo(r,{applicationId:e,hostname:i,locationId:t});s.logEvent({event:oi.LoadOK,eventSource:pi.App});var c=new Cp(a,s,r);return wp.set(n,c),c}}})()})();